(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{140:function(e,t,n){"use strict";var a={};n.r(a),n.d(a,"panel",function(){return Fe}),n.d(a,"horPanel",function(){return Me}),n.d(a,"spotPanel",function(){return Te}),n.d(a,"verPanel",function(){return Ae}),n.d(a,"binding",function(){return Je}),n.d(a,"iconfont",function(){return Ie}),n.d(a,"shape",function(){return Ye}),n.d(a,"node",function(){return Be}),n.d(a,"group",function(){return ze}),n.d(a,"link",function(){return ot}),n.d(a,"textBlock",function(){return Ue}),n.d(a,"picture",function(){return Ge}),n.d(a,"imageSet",function(){return Ve}),n.d(a,"tooltip",function(){return Xe}),n.d(a,"tag",function(){return tt}),n.d(a,"switcher",function(){return it}),n.d(a,"mark",function(){return rt}),n.d(a,"makePort",function(){return Re}),n.d(a,"setGray",function(){return Ce}),n.d(a,"removeGray",function(){return Pe});n(153),n(142),n(320);var i=n(162),r=n.n(i),o=n(157),s=(n(174),n(158),n(159),{register:function(e,t){if(s[e])throw new Error("diagram "+e+" is exisit");s[e]=t}}),l=s,c=r.a.GraphObject.make,d=["nodeTemplate","linkTemplate","nodeTemplateMap","linkTemplateMap","groupTemplate","groupTemplateMap"],u={name:"XdhGo",provide:function(){return{diagramName:this.diagramName}},props:{diagramName:{type:String,default:function(){return"diagram"+(new Date).getTime()+Math.floor(1e3*Math.random())}},goRegister:{type:Function},width:{type:String,default:"100%"},height:{type:String,default:"100%"},nodeTemplate:{type:Function},linkTemplate:{type:Function},nodeTemplateMap:{type:Function},linkTemplateMap:{type:Function},groupTemplate:{type:Function},groupTemplateMap:{type:Function},type:{type:String,default:"Model",validator:function(e){return["Model","GraphLinksModel","TreeModel"].includes(e)}},nodes:{type:Array},links:{type:Array},config:{type:[Object,Function]},layout:{type:Function},events:{type:Object,default:function(){return Object.create(null)}},modelConfig:{type:[Object,Function]},palette:{type:Boolean,default:!1},loadDataFunc:{type:[Function,Object],default:null}},data:function(){return{htmlInfo:{},timeout:null}},computed:{styles:function(){return{width:this.width,height:this.height}}},watch:{nodes:function(e){var t=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.loadData(e,t.links)},50)},links:function(e){var t=this;this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.loadData(t.nodes,e)},50)}},methods:{loadData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(l[this.diagramName]){var n=l[this.diagramName].model;n.nodeDataArray=e,"GraphLinksModel"===this.type&&(n.linkDataArray=t),l[this.diagramName].updateAllRelationshipsFromData(),this.$emit("on-load-data",l[this.diagramName],c,r.a)}},loadTemplate:function(){var e=this;d.forEach(function(t){e.setTemplate(t,e[t])})},setTemplate:function(e,t){if(!d.includes(e))throw new Error("setTemplate不支持模板类型".concat(e));"function"==typeof t&&(l[this.diagramName][e]=t(c,r.a,this))},loadLayout:function(e){e&&(l[this.diagramName].layout=e(c,r.a,this))},bindEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(l[this.diagramName])for(var t in e)if(e.hasOwnProperty(t)){var n=this.listeners[t]=e[t].bind(this);l[this.diagramName].addDiagramListener(t,n)}},unbindEvents:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(l[this.diagramName])for(var t in e)if(e.hasOwnProperty(t)){var n=this.listeners[t]||e[t];l[this.diagramName].removeDiagramListener(t,n),delete this.listeners[t]}},findNode:function(e,t){if(!l[this.diagramName])return null;var n=l[this.diagramName].model,a=n.nodeDataArray||[],i="function"==typeof e?a.find(e):n.findNodeDataForKey(e);return t?l[this.diagramName].findNodeForData(i):i},findNodes:function(e,t){var n=this;if(!l[this.diagramName])return[];if(!("function"==typeof e))throw new Error("findNodes的filter参数必须要是函数");var a=(l[this.diagramName].model.nodeDataArray||[]).filter(e);return t?a.map(function(e){return l[n.diagramName].findNodeForData(e)}):a},findLink:function(e,t){if(!l[this.diagramName])return null;var n=l[this.diagramName].model,a=n.linkDataArray||[],i="function"==typeof e?a.find(e):n.findLinkDataForKey(e);return t?l[this.diagramName].findLinkForData(i):i},findLinks:function(e,t){var n=this;if(!l[this.diagramName])return[];if(!("function"==typeof e))throw new Error("findLinks的filter参数必须要是函数");var a=(l[this.diagramName].model.linkDataArray||[]).filter(e);return t?a.map(function(e){return l[n.diagramName].findLinkForData(e)}):a},findChildLinks:function(e){if(!e||!l[this.diagramName])return[];var t=l[this.diagramName].model.linkDataArray||[],n=[];return function e(a){t.filter(function(e){return e.from===a}).forEach(function(t){n.push(t),e(t.to)})}(e),n},findChildNodes:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parent",a=[];if("GraphLinksModel"===this.type){var i=this.findChildLinks(e);i.forEach(function(e){a.push(t.findNode(e.to))})}else if("TreeModel"===this.type){var r=l[this.diagramName].model,o=r.nodeDataArray||[],s=function e(t){o.filter(function(e){return e[n]===t}).forEach(function(t){a.push(t),e(t.key)})};s(e)}return a},update:function(e,t,n){if(l[this.diagramName]){var a=Object(o.a)(t);if(!["string","object"].includes(a))throw new Error("update的参数 props 必须事string 或 object类型");var i=l[this.diagramName].model;if(l[this.diagramName].startTransaction("update"),"string"===a)i.set(e,t,n);else for(var r in t)t.hasOwnProperty(r)&&i.set(e,r,t[r]);l[this.diagramName].commitTransaction("update")}},addNode:function(e){if(l[this.diagramName]){var t=l[this.diagramName].model;l[this.diagramName].startTransaction("addNode"),Array.isArray(e)?t.addNodeDataCollection(e):t.addNodeData(e),l[this.diagramName].commitTransaction("addNode")}},addLink:function(e){if(l[this.diagramName]){var t=l[this.diagramName].model;l[this.diagramName].startTransaction("addLink"),Array.isArray(e)?t.addLinkDataCollection(e):t.addLinkData(e),l[this.diagramName].commitTransaction("addLink")}},removeNode:function(e){if(l[this.diagramName]&&("string"==typeof e&&(e=this.findNode(e)),e)){var t=l[this.diagramName].model;l[this.diagramName].startTransaction("removeNode"),Array.isArray(e)?t.removeNodeDataCollection(e):t.removeNodeData(e),l[this.diagramName].commitTransaction("removeNode")}},removeLink:function(e){if(l[this.diagramName]&&"GraphLinksModel"===this.type&&("string"==typeof e&&(e=this.findLink(e)),e)){var t=l[this.diagramName].model;l[this.diagramName].startTransaction("removeLink"),Array.isArray(e)?t.removeLinkDataCollection(e):t.removeLinkData(e),l[this.diagramName].commitTransaction("removeLink")}},removeChild:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"parent",n=this.findChildNodes(e,t),a=this.findChildLinks(e,t);l[this.diagramName].startTransaction("removeChild"),this.removeNode(n),this.removeLink(a),l[this.diagramName].commitTransaction("removeChild")},clear:function(){if(l[this.diagramName]){var e=l[this.diagramName].model;l[this.diagramName].startTransaction("clear"),e.clear(),l[this.diagramName].commitTransaction("clear")}},toJson:function(){return l[this.diagramName]?l[this.diagramName].model.toJson():JSON.stringify({})},fromJson:function(e){l[this.diagramName]&&(l[this.diagramName].model=r.a.Model.fromJson("string"==typeof e?e:JSON.stringify(e)))},resize:function(){l[this.diagramName]&&l[this.diagramName].requestUpdate()},getHtmlInfo:function(){var e=this;this.$children.forEach(function(t){"XdhGoHtml"===t.name&&(e.htmlInfo[t.menuName]=t.bindMenu(),t.appendToBody&&e.$el.parentNode.appendChild(t.$el))})}},mounted:function(){l.register(this.diagramName,c(this.palette?r.a.Palette:r.a.Diagram,this.$el,"function"==typeof this.config?this.config(c,r.a):this.config||{})),this.getHtmlInfo(),this.loadTemplate(),l[this.diagramName].model=c(r.a[this.type],"function"==typeof this.modelConfig?this.modelConfig(c,r.a):this.modelConfig||{}),this.loadLayout(this.layout),this.loadDataFunc&&"function"==typeof this.loadDataFunc?this.loadDataFunc(l[this.diagramName],c,r.a,this.nodes,this.links):this.loadData(this.nodes,this.links),this.bindEvents(this.events),this.$emit("on-ready",l[this.diagramName],c,r.a)},beforeDestroy:function(){this.unbindEvents(this.events),l[this.diagramName].div=null,delete l[this.diagramName]},created:function(){this.goRegister&&"function"==typeof this.goRegister&&this.goRegister(c,r.a),this.listeners={}}},p=n(16),f=Object(p.a)(u,function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"xdh-go",style:this.styles},[this._t("default")],2)},[],!1,null,null,null).exports;f.install=function(e){e.component(f.name,f)};var h=f,g=r.a.GraphObject.make,m={name:"XdhGoHtml",inject:["diagramName"],props:{menuName:{type:String,required:!0},appendToBody:{type:Boolean,default:!0},menuStyle:{type:Object,default:function(){return{"z-index":1e4,position:"fixed"}}},beforeShowMenu:{type:Function,default:function(){}},showContextMenu:{type:Function},hideContextMenu:{type:Function},autoHide:{type:Boolean,default:!0}},data:function(){return{menu:null,menuObj:null,name:"XdhGoHtml"}},computed:{},methods:{bindMenu:function(){this.menuObj=this.$children[0],this.menu=this.$children[0].$el,this.menu.addEventListener("contextmenu",function(e){return e.preventDefault(),!1},!1);var e={show:this.showMenu,mainElement:this.menu};return this.autoHide&&(e.hide=this.hideMenu),g(r.a.HTMLInfo,e)},showMenu:function(e,t,n){if(this.beforeShowMenu(e,t,n,this.menu),this.showContextMenu)this.showContextMenu(e,t,n,this.menu);else{this.menu.style.display="block";var a=t.lastInput.event;this.menu.style.left=a.pageX+"px",this.menu.style.top=a.pageY+"px"}},hideMenu:function(e,t){this.hideContextMenu?this.hideContextMenu(e,t,this.menu):this.menu.style.display="none"}},mounted:function(){this.appendToBody?document.body.append(this.$children[0].$el):this.$parent.$parent.$el.append(this.$children[0].$el)}},y=Object(p.a)(m,function(){var e=this.$createElement;return(this._self._c||e)("div",{style:this.menuStyle},[this._t("default")],2)},[],!1,null,null,null).exports;y.install=function(e){e.component(y.name,y)};var b=y,v={name:"XdhGoTooltip",components:{},props:{text:{type:String,default:"提示"}},data:function(){return{}},computed:{},methods:{},created:function(){},beforeDestroy:function(){this.$el.parentNode.removeChild(this.$el)}},k=Object(p.a)(v,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"xdh-go-tooltip"},[this._t("default",[t("div",{staticClass:"tooltip-text"},[this._v("\n       "+this._s(this.text)+"\n    ")])],{text:this.text})],2)},[],!1,null,"0470b931",null).exports;k.install=function(e){e.component(k.name,k)};var O=k,j=(n(160),n(156),n(161));n(333),n(269);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var _={name:"XdhGoCircleMenu",props:{angleRange:{type:Array,default:function(){return[-30,210]}},propMap:{type:Object,default:function(){return{text:"text",subMenu:"subMenu"}}},itemKey:{type:String,default:"text"},innerRadius:{type:Number,default:60},itemWidth:{type:Number,default:100},subRangeLimit:Boolean,trigger:{type:String,default:"click"},menuList:{type:Array,default:function(){return[]}},itemStyle:{type:Object,default:function(){return{color:"#333"}}},activeColor:{type:String,default:"rgba(255, 102, 0, 0.5)"},normalColor:{type:String,default:"rgba(140, 197, 255, 0.8)"},hoverColor:{type:String,default:""},fixed:{type:Boolean},textRotate:{type:Boolean},itemGap:{type:Number,default:5},zIndex:{type:Number,default:2}},computed:{comHoverColor:function(){return this.hoverColor||this.activeColor},menuStyle:function(){return this.fixed?"width: ".concat(2*(this.innerRadius+this.itemWidth),"px;\n          height: ").concat(2*(this.innerRadius+this.itemWidth),"px;\n          z-index: ").concat(this.zIndex,";\n          "):""},fixedOffset:function(){var e=this.innerRadius+this.itemWidth;return this.fixed?e:0},maskStyle:function(){return"\n          width:".concat(2*this.innerRadius,"px;\n          height:").concat(2*this.innerRadius,"px;\n          margin-left: ").concat(-this.innerRadius+this.fixedOffset,"px;\n          margin-top: ").concat(-this.innerRadius+this.fixedOffset,"px;\n          z-index: ").concat(this.zIndex+1,";\n          ")}},watch:{angleRange:{deep:!0,handler:function(e){this.resetMenu()}},menuList:{deep:!0,immediate:!0,handler:function(e){this.resetMenu()}},innerRadius:function(e){this.resetMenu()},itemWidth:function(e){this.resetMenu()}},data:function(){return{activeMenus:[],menuMap:{},menuLevels:[],tPropMap:{text:"text",subMenu:"subMenu"},triggerMap:{click:["click"],mouseover:["mouseenter"]},hoverItem:"",mouseLeaveTimeout:null}},methods:{resetMenu:function(){this.calList(this.menuList,0,"root"),this.initLevels(),this.activeMenus=[]},initLevels:function(){var e=this;this.menuLevels=[N({},this.menuMap.level0,{menuList:this.menuMap.level0.item_root},this.calCircle(this.menuMap.level0.item_root))],this.$nextTick(function(){setTimeout(function(){e.menuLevels[0].opened=!0},210)})},calCircle:function(e,t,n){var a,i,r,o=e.length;if(t){i=t.liWidth+5,r=t.start+n*t.itemAngle+t.itemAngle/2;var s,l,c=o*(t.liWidth*t.itemAngle/(i+this.itemWidth));this.subRangeLimit?c>=Math.abs(this.angleRange[0]-this.angleRange[1])?(s=this.angleRange[0],l=this.angleRange[1]):r-c/2<=this.angleRange[0]?l=(s=this.angleRange[0])+c:r+c/2>=this.angleRange[1]?s=(l=this.angleRange[1])-c:(s=r-c/2,l=r+c/2):(c>360&&(c=360),s=r-c/2,l=r+c/2),a=[s,l]}else{if(!(this.angleRange instanceof Array&&2===this.angleRange.length))throw new Error("angleRange参数错误");a=this.angleRange,i=this.innerRadius,r=this.angleRange[0]+Math.abs(this.angleRange[0]-this.angleRange[1])/2}var d=Math.abs(a[0]-a[1]),u=parseFloat(d/o),p=i+this.itemWidth,f=2*p;return{start:a[0],itemAngle:u,liWidth:p,menuWidth:f,innerRadius:i,centerAngle:r,opened:!1}},calList:function(e,t,n){var a=this,i=[];e.forEach(function(e,n){e[a.tPropMap.subMenu]&&a.calList(e[a.tPropMap.subMenu],t+1,e[a.itemKey]),e.levelNum=t,i.push(e)}),this.menuMap["level"+t]||(this.menuMap["level"+t]={zIndex:9999-t,levelNum:t}),this.menuMap["level"+t]["item_"+n]=i},cxcommand:function(e,t,n,a){var i=this;switch(e.type){case"mouseleave":this.hoverItem="",this.mouseLeaveTimeout=setTimeout(function(){i.hide()},800);break;case"mouseenter":this.hoverItem="item_"+t[this.itemKey],this.mouseLeaveTimeout&&clearTimeout(this.mouseLeaveTimeout)}if(t[this.tPropMap.subMenu]){if(!this.triggerMap[this.trigger].includes(e.type))return;this.reduceMenu(n.levelNum+1).then(function(){var e=i.menuMap["level"+(t.levelNum+1)],r=e["item_"+t[i.itemKey]];i.activeMenus.push("item_"+t[i.itemKey]),i.$nextTick(function(){var t=N({},e,{menuList:r},i.calCircle(r,n,a));i.menuLevels.push(t),i.$nextTick(function(){setTimeout(function(){t.opened=!0},210)})})})}else{if("click"!==e.type)return void this.reduceMenu(n.levelNum+1);if(t.disabled)return;this.reduceMenu(n.levelNum+1).then(function(){i.$emit("on-item-click",e,t)})}},reduceMenu:function(e){var t=this;return new Promise(function(n,a){t.menuLevels.length>e?(t.menuLevels[t.menuLevels.length-1].opened=!1,setTimeout(function(){t.menuLevels.pop(),t.activeMenus.pop(),t.reduceMenu(e).then(function(){n()})},0)):n()})},show:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{left:0,top:0};this.$el.style.display="block",this.$el.style.left=t.left+"px",this.$el.style.top=t.top+"px",setTimeout(function(){e.opened=!0},200)},hide:function(){var e=this;this.reduceMenu(1).then(function(){e.fixed||(e.$el.style.display="none")})}},created:function(){this.tPropMap=Object.assign({},{text:"text",subMenu:"subMenu"},this.propMap)},mounted:function(){},beforeDestroy:function(){this.$el.parentNode.removeChild(this.$el)}},x=(n(336),Object(p.a)(_,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:{"circle-menus":!0,fixed:e.fixed},style:e.menuStyle},[n("div",{staticClass:"center-mask",style:e.maskStyle,on:{click:function(t){return e.hide()}}},[e._t("center-btn",null,{menuList:e.menuList,menuLevels:e.menuLevels})],2),e._v(" "),e._l(e.menuLevels,function(t,a){return n("div",{key:a,class:{"circle-menu":!0,opened:t.opened},style:"\n      width: "+t.menuWidth+"px;\n        height: "+t.menuWidth+"px;\n        margin-top: "+(-t.liWidth+e.fixedOffset)+"px;\n        margin-left: "+(-t.liWidth+e.fixedOffset)+"px;\n        z-index: "+t.zIndex+";\n      "},[n("ul",e._l(t.menuList,function(a,i){return n("li",{key:i,class:{disabled:a.disabled,invisible:!1===a.visible},style:t.opened?"\n          transform: rotate("+(t.start+i*t.itemAngle)+"deg) skew("+(90-t.itemAngle+1)+"deg);\n          width:"+t.liWidth+"px;\n          height:"+t.liWidth+"px;\n          margin-left: -"+t.liWidth+"px;\n          ":"\n          transform: rotate("+(t.centerAngle-t.itemAngle/2)+"deg) skew("+(90-t.itemAngle+1)+"deg);\n          width:"+t.liWidth+"px;\n          height:"+t.liWidth+"px;\n          margin-left: -"+t.liWidth+"px;\n          ",on:{mouseenter:function(n){return e.cxcommand(n,a,t,i)},click:function(n){return e.cxcommand(n,a,t,i)},mouseleave:function(n){return e.cxcommand(n,a,t,i)}}},[n("a",{staticClass:"item-content",style:"\n            background: radial-gradient(transparent "+t.innerRadius+"px, "+(e.activeMenus.includes("item_"+a[e.itemKey])?e.activeColor:e.hoverItem==="item_"+a[e.itemKey]?e.comHoverColor:e.normalColor)+" "+t.innerRadius+"px);\n            width: "+t.menuWidth+"px;\n            height: "+t.menuWidth+"px;\n            right: -"+t.liWidth+"px;\n            bottom: -"+t.liWidth+"px;\n            transform: skew(-"+(90-t.itemAngle+1)+"deg) rotate(-"+(90-t.itemAngle/2)+"deg) scale(1);\n            "},[n("div",{style:e.textRotate?"transform: rotate("+-(t.start+i*t.itemAngle-(90-t.itemAngle/2))+"deg);height:"+(e.itemWidth-8)+"px;":"height:${itemWidth - 8}px;"},[e._t("list-item",[n("a",{staticClass:"item-text",style:Object.assign({},{"line-height":e.itemWidth+"px"},e.itemStyle),attrs:{href:"#",target:"_self"}},[e._v(e._s(a[e.propMap.text]))])],{item:a})],2)])])}),0)])})],2)},[],!1,null,"afcf9414",null).exports);x.install=function(e){e.component(x.name,x)};var D=x,S={name:"XdhGoOverview",inject:["diagramName"],components:{},props:{diagramName:{type:String,default:"dig"},divStyle:{type:Object,default:function(){return{}}}},data:function(){return{name:"XdhGoOverview",defaultStyle:{position:"absolute",width:"150px",height:"150px",border:"2px solid #75a3fa","z-index":1,"background-color":"rgba(100,100,100,0.4)"},style:{}}},computed:{},methods:{},mounted:function(){var e=this,t=this.$el;this.$parent.$once("on-ready",function(){new r.a.Overview(t).observed=l[e.diagramName],e.$parent.$el.appendChild(t)})},created:function(){this.style=Object.assign({},this.defaultStyle,this.divStyle)}},L=Object(p.a)(S,function(){var e=this.$createElement;return(this._self._c||e)("div",{style:this.style})},[],!1,null,"78416c3a",null).exports;L.install=function(e){e.component(L.name,L)};var C=L,P={name:"XdhGoSnapshot",components:{},props:{layout:{type:String,default:"image,imageData,svg"},diagramName:{type:String,default:"dig"},options:{type:Object,default:function(){return{}}}},data:function(){return{imageDefaultOption:{scale:1,size:new r.a.Size(100,100),type:"image/png"},svgDefaultOption:{scale:1,size:new r.a.Size(100,100)}}},computed:{},methods:{makeImage:function(){var e=l[this.diagramName].documentBounds,t=new r.a.Size(e.width+20,e.height+20),n=Object.assign({},this.imageDefaultOption,{size:t},this.options.image||{}),a=l[this.diagramName].makeImage(n);this.$emit("on-snap","image",a)},makeImageData:function(){var e=l[this.diagramName].documentBounds,t=new r.a.Size(e.width+20,e.height+20),n=Object.assign({},this.imageDefaultOption,{size:t},this.options.imageData||{}),a=l[this.diagramName].makeImageData(n);this.$emit("on-snap","imageData",a)},makeSvg:function(){var e=l[this.diagramName].documentBounds,t=new r.a.Size(e.width+20,e.height+20),n=Object.assign({},this.svgDefaultOption,{size:t},this.options.svg||{}),a=l[this.diagramName].makeSvg(n);this.$emit("on-snap","svg",a)}},created:function(){}},M=Object(p.a)(P,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"xdh-go-snapshot"},[e._t("default",e._l(e.layout.split(","),function(t,a){return n("span",{key:a,staticClass:"btn"},["image"===t?n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.makeImage()}}},[e._v("保存图片")]):e._e(),e._v(" "),"imageData"===t?n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.makeImageData()}}},[e._v("保存图片base64")]):e._e(),e._v(" "),"svg"===t?n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.makeSvg()}}},[e._v("保存svg")]):e._e()],1)}),{makeImage:e.makeImage,makeImageData:e.makeImageData,makeSvg:e.makeSvg})],2)},[],!1,null,"7efa8b40",null).exports;M.install=function(e){e.component(M.name,M)};var A=M,T=(n(337),n(338),n(186)),F=n(187),E=n(509),I=n(270),R=n(510),B=n(355),z=n(3),$=n(0),K=function(){},G={handle:null,axis:null,delay:100,range:{left:-1e4,top:-1e4,width:1e4,height:1e4},target:null,clone:!1,revert:!0,group:null,disabled:!1,appendToBody:!1,data:null,onStartDrag:K,onStopDrag:K,onDrag:K},W=function(e){function t(e,n,a){var i;return Object(T.a)(this,t),(i=Object(E.a)(this,Object(I.a)(t).call(this))).document=e,i.el=n,i.init(a),i}return Object(B.a)(t,e),Object(F.a)(t,[{key:"init",value:function(e){this.options=Object.assign({},G,!1===e?{disabled:!0}:e||{});var t=this.options;this.handle=t.handle&&this.el.querySelector(t.handle)||this.el,t.disabled||(Object(z.addClass)(this.el,"xdh-draggable"),Object(z.addClass)(this.handle,"xdh-draggable__handle"),this.on(this.handle,"mousedown",this.handleMouseDown)),this.setRange()}},{key:"setRange",value:function(){var e=this.options.target;if("string"==typeof e&&(this.options.target=this.document.querySelector(e)),this.options.target instanceof HTMLElement){var t=this.options.target.getBoundingClientRect();this.options.range={left:t.left,top:t.top,width:t.left+t.width,height:t.top+t.height}}}},{key:"reset",value:function(e){this.destroy(),this.init(e)}},{key:"handleMouseDown",value:function(e){var t=this;this.timer=setTimeout(function(){t.on(t.document,"mousemove",t.handleMouseMove),t.startDrag(e.clientX,e.clientY)},this.options.delay),this.on(this.document,"mouseup",this.handleMouseUp)}},{key:"handleMouseMove",value:function(e){this.isDragging&&(this.el.__resizable__&&this.el.__resizable__.isResizing||this.drag(e.clientX,e.clientY))}},{key:"handleMouseUp",value:function(e){clearTimeout(this.timer),this.isDragging&&(this.off(this.document,"mousemove",this.handleMouseMove),this.stopDrag(e.clientX,e.clientY)),this.off(this.document,"mouseup",this.handleMouseUp)}},{key:"setBodySelect",value:function(e){e?Object(z.addClass)(this.document.body,"user-select--none"):Object(z.removeClass)(this.document.body,"user-select--none")}},{key:"createProxy",value:function(){var e=this.options;if(e.clone){var t=null;return t="function"==typeof e.clone?e.clone(this):this.el.cloneNode(!0),Object(z.addClass)(t,"xdh-draggable__clone"),e.appendToBody?this.document.body.appendChild(t):this.el.parentNode.insertBefore(t,this.el),t}return this.el}},{key:"removeProxy",value:function(){var e=this.options;e.clone&&(e.revert?(this.on(this.dragProxy,"webkitTransitionEnd",this.handleAnimationEnd),this.on(this.dragProxy,"transitionend",this.handleAnimationEnd),Object(z.addClass)(this.dragProxy,"xdh-draggable__clone--translate"),Object(z.setStyle)(this.dragProxy,"left","".concat(this.dragData.startLeft,"px")),Object(z.setStyle)(this.dragProxy,"top","".concat(this.dragData.startTop,"px")),setTimeout(this.handleAnimationEnd.bind(this),500)):this.handleAnimationEnd())}},{key:"handleAnimationEnd",value:function(){this.dragProxy&&(this.off(this.dragProxy,"webkitTransitionEnd",this.handleAnimationEnd),this.off(this.dragProxy,"transitionend",this.handleAnimationEnd),this.dragProxy.parentNode&&this.dragProxy.parentNode.removeChild(this.dragProxy),this.dragProxy=null)}},{key:"startDrag",value:function(e,t){var n=this.el.offsetLeft,a=this.el.offsetTop,i=this.el.offsetWidth,r=this.el.offsetHeight;this.isDragging=!0,this.dragData={startLeft:n,startTop:a,left:n,top:a,startX:e,startY:t,width:i,height:r,offsetWidth:e-n,offsetHeight:t-a,data:this.options.data},this.options.onStartDrag(this.dragData),this.setBodySelect(!0),Object(z.addClass)(this.el,"xdh-draggable--dragging"),this.dragProxy=this.createProxy(),this.droppables=this.getDroppables()}},{key:"getDroppables",value:function(){var e=this.options;return e.group?Array.from(this.document.querySelectorAll(".xdh-droppable")).filter(function(t){if(!("none"!==t.style.display))return!1;var n=t.__droppable__.options;return!(!n.accept||n.disabled)&&n.accept.includes(e.group.trim())}):[]}},{key:"hasInRect",value:function(e,t,n){return e>n.left&&e<n.left+n.width&&t>n.top&&t<n.top+n.height}},{key:"checkDroppable",value:function(e,t){var n=this;return this.droppables.filter(function(a){var i=a.getBoundingClientRect(),r=a.__droppable__;a.entered=!!a.entered;var o=n.hasInRect(e,t,i);if(o){if(!a.entered)n.droppables.filter(function(e){return e.entered}).forEach(function(e){e.entered=!1,e.__droppable__.$emit("drag-leave",n)}),a.entered=!0,r.$emit("drag-enter",n);r.$emit("drag-over",n)}else a.entered&&(a.entered=!1,r.$emit("drag-leave",n));return o})}},{key:"getDragRange",value:function(e,t,n,a){var i=this.options.range,r={left:e,top:t};return e<i.left&&(r.left=i.left),t<i.top&&(r.top=i.top),e+n>i.width&&(r.left=i.width-n),t+a>i.height&&(r.top=i.height-a),r}},{key:"drag",value:function(e,t){var n=this.dragData,a=n.startLeft+e-n.startX,i=n.startTop+t-n.startY,r=this.getDragRange(a,i,n.width,n.height);switch(this.options.axis){case"h":n.left=r.left;break;case"v":n.top=r.top;break;default:n.left=r.left,n.top=r.top}this.applyDrag(),this.checkDroppable(e,t),this.options.onDrag(this.dragData)}},{key:"applyDrag",value:function(){var e=this.dragData;Object(z.setStyle)(this.dragProxy,"left","".concat(e.left,"px")),Object(z.setStyle)(this.dragProxy,"top","".concat(e.top,"px"))}},{key:"stopDrag",value:function(e,t){var n=this;this.isDragging=!1,this.setBodySelect(),this.options.onStopDrag(this.dragData),Object(z.removeClass)(this.el,"xdh-draggable--dragging");var a=this.checkDroppable(e,t);a.length?this.handleAnimationEnd():this.removeProxy(),a.forEach(function(e){e.entered&&e.__droppable__.$emit("drop",n,a)})}},{key:"destroy",value:function(){Object(R.a)(Object(I.a)(t.prototype),"destroy",this).call(this),this.handleAnimationEnd(),this.off(this.handle,"mousedown",this.handleMouseDown),Object(z.removeClass)(this.el,"xdh-draggable"),Object(z.removeClass)(this.handle,"xdh-draggable__handle")}}]),t}(function(){function e(){Object(T.a)(this,e),this.__handlers__=[],this.__event__=new $.default({})}return Object(F.a)(e,[{key:"on",value:function(e,t,n){var a=n.bind(this),i={el:e,eventName:t,callback:n,proxy:a};this.__handlers__.push(i),Object(z.on)(e,t,a)}},{key:"$on",value:function(e,t){return this.__event__.$on.apply(this.__event__,arguments)}},{key:"off",value:function(e,t,n){var a=this;if(e){var i=arguments.length;this.__handlers__.forEach(function(r,o){switch(i){case 3:r.el===e&&r.eventName===t&&r.callback===n&&(Object(z.off)(r.el,r.eventName,r.proxy),a.__handlers__.splice(o,1));break;case 2:r.el===e&&r.eventName===t&&(Object(z.off)(r.el,r.eventName,r.proxy),a.__handlers__.splice(o,1));break;case 1:r.el===e&&(Object(z.off)(r.el,r.eventName,r.proxy),a.__handlers__.splice(o,1))}})}}},{key:"$off",value:function(e,t){return this.__event__.$off.apply(this.__event__,arguments)}},{key:"$emit",value:function(e,t){return this.__event__.$emit.apply(this.__event__,arguments)}},{key:"destroy",value:function(){this.__handlers__.forEach(function(e){Object(z.off)(e.el,e.eventName,e.proxy)}),this.__handlers__=[],this.__event__.$off(),this.__event__.$destroy()}}]),e}()),H={bind:function(e,t){e.__draggable__=new W(window.document,e,t.value)},componentUpdated:function(e,t){var n=e.__draggable__;n.options=Object.assign({},G,n.options,!1===t.value?{disabled:!0}:t.value||{})},unbind:function(e){e.__draggable__.destroy()}},V=sessionStorage;localStorage;function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V,a="object"===Object(o.a)(t)?JSON.stringify(t):t;n.setItem(e,a)}var X={name:"XdhGoDraft",components:{},directives:{draggable:H},props:{diagramName:{type:String,default:"dig"},dragable:{type:Boolean,default:!0},localKey:{type:String,default:""},local:{type:Boolean,default:!0},visible:{type:Boolean,default:!1},list:{type:Array,default:function(){return[]}}},data:function(){return{draftList:[],imageDefaultOption:{size:new r.a.Size(30,30),type:"image/png"},itemName:"",draftVisible:!1}},watch:{draftVisible:function(e){this.$emit("update:visible",e)},visible:function(e){this.draftVisible=e}},computed:{style:function(){return{width:"350px"}}},methods:{close:function(){this.draftVisible=!1},save:function(){var e=l[this.diagramName].documentBounds,t=30/e.width,n=30/e.height,a=Math.min(t,n),i=Object.assign({},this.imageDefaultOption,{scale:a}),r=l[this.diagramName].makeImageData(i),o=new Date,s={thumb:r,name:this.itemName,time:"".concat(o.toLocaleString()," ").concat(o.toLocaleTimeString()),json:l[this.diagramName].model.toJson()};this.draftList.push(s),this.$emit("save",s),this.local&&U("XDH-GO-DRAFT"+this.localKey,this.draftList,localStorage),this.$emit("save")},remove:function(e){var t=this.draftList.indexOf(e);this.$emit("remove",this.draftList[t]),this.draftList.splice(t,1),this.local&&U("XDH-GO-DRAFT"+this.localKey,this.draftList,localStorage)},load:function(e){l[this.diagramName].clear(),l[this.diagramName].model=r.a.Model.fromJson(e.json)},clear:function(){this.draftList=[],this.$emit("clear"),this.local&&function(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:V).removeItem(e)}("XDH-GO-DRAFT"+this.localKey,localStorage)},destroy:function(){this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},mounted:function(){document.body.appendChild(this.$el)},created:function(){if(this.draftVisible=this.visible,this.local){var e=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:V).getItem(e);if(t)return/(^\{[\W\w]*\}$) || (^\[[\W\w]*\]$)/.test(t)?JSON.parse(t):t;return null}("XDH-GO-DRAFT"+this.localKey,localStorage);this.draftList=e||this.list}else this.draftList=this.list},beforeDestroy:function(){this.destroy()}},Y=Object(p.a)(X,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.draftVisible,expression:"draftVisible"},{name:"draggable",rawName:"v-draggable",value:e.dragable,expression:"dragable"}],staticClass:"xdh-go-draft",style:e.style},[e._t("default",[n("el-card",{staticClass:"xdh-go-draft__container"},[n("div",{staticClass:"xdh-go-draft__header",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("草稿箱")]),e._v(" "),n("el-button",{staticStyle:{float:"right",padding:"0"},attrs:{type:"text",circle:"",icon:"iconfont icon-multiply",size:"mini"},on:{click:e.close}})],1),e._v(" "),n("div",{staticClass:"xdh-go-draft__content"},e._l(e.draftList,function(t,a){return n("div",{key:a,staticClass:"xdh-go-draft__item"},[n("img",{staticClass:"img",attrs:{src:t.thumb}}),e._v(" "),n("span",{staticClass:"txt"},[n("div",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),n("div",{staticClass:"time"},[e._v(e._s(t.time))])]),e._v(" "),n("div",{staticClass:"btns"},[n("i",{staticClass:"iconfont icon-multiply remove",on:{click:function(n){return e.remove(t)}}}),e._v(" "),n("i",{staticClass:"iconfont icon-download load",on:{click:function(n){return e.load(t)}}})])])}),0),e._v(" "),n("div",{staticClass:"xdh-go-draft__footer",on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save()}}},[n("el-input",{staticClass:"name-input",attrs:{size:"mini",placeholder:"输入草稿名称"},model:{value:e.itemName,callback:function(t){e.itemName=t},expression:"itemName"}}),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary",circle:"",icon:"iconfont icon-save"},on:{click:function(t){return e.save()}}}),e._v(" "),n("el-button",{attrs:{size:"mini",type:"primary",circle:"",icon:"iconfont icon-delete"},on:{click:function(t){return e.clear()}}})],1)])],{close:e.close,draftList:e.draftList,remove:e.remove,load:e.load,save:e.save,clear:e.clear})],2)},[],!1,null,"f1a6743c",null).exports;Y.install=function(e){e.component(Y.name,Y)};var J=Y,q={name:"XdhGoViewer",components:{},directives:{draggable:H},props:{diagramName:{type:String,default:"dig"},visible:{type:Boolean,default:!1}},data:function(){return{viewerVisible:!1,activeName:"nodes",nodes:[],links:[],others:[],clickTimeout:null,currKey:""}},computed:{style:function(){return{width:"800px"}}},watch:{viewerVisible:function(e){this.$emit("update:visible",e)},visible:function(e){this.viewerVisible=e,this.reloadDiagram()},diagramName:function(e){var t=this;e&&(this.unbindEvents(),setTimeout(function(){t.bindEvents(),t.reloadDiagram()},100))}},methods:{reloadDiagram:function(){var e=l[this.diagramName].model.toJson(),t=JSON.parse(e),n=[],a=[];t.nodeDataArray&&(n=this.getChildren(t.nodeDataArray,0)),t.linkDataArray&&(a=this.getChildren(t.linkDataArray,0));var i={};for(var r in t)["nodeDataArray","linkDataArray"].includes(r)||(i[r]=t[r]);var o=this.getChildren(i,0);this.nodes=n,this.links=a,this.others=o},getChildren:function(e,t){var n=this;if(e instanceof Array){var a=[];return e.forEach(function(e){var i={data:e,level:t};0===t&&(e.key?i.key=e.key:e.from&&(i.key="".concat(e.from,"_").concat(e.to)));var r=n.getChildren(e,t+1);r instanceof Array?(i.children=r,i.label=JSON.stringify(e).substr(0,50)):i.label="string"==typeof e?"".concat(name,":  '").concat(e,"'"):"".concat(name,":  ").concat(e),a.push(i)}),a}if(e instanceof Object){var i=[];for(var r in e){var o=e[r],s={data:o,level:t},l=this.getChildren(o,t+1);l instanceof Array?(s.children=l,s.label="".concat(r,":  ").concat(JSON.stringify(o).substr(0,50))):s.label="string"==typeof o?"".concat(r,":  '").concat(o,"'"):"".concat(r,":  ").concat(o),i.push(s)}return i}return e},findNode:function(e){var t=l[this.diagramName].model.nodeDataArray.find(function(t){return t.key===e.data.key});if(t){var n=l[this.diagramName].findNodeForData(t);l[this.diagramName].clearSelection(),n.isSelected=!0;var a=n.actualBounds;l[this.diagramName].centerRect(a),this.currKey=n.data.key}else{var i=this.diagramName,r=l[i].model.linkDataArray.find(function(t){return t.from===e.data.from&&t.to===e.data.to});if(r){var o=l[this.diagramName].findLinkForData(r);if(l[this.diagramName].clearSelection(),o){o.isSelected=!0;var s=o.actualBounds;l[this.diagramName].centerRect(s),this.currKey="".concat(o.data.from,"_").concat(o.data.to)}}}},close:function(){this.viewerVisible=!1},destroy:function(){this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},objectClick:function(e){var t=this;this.clickTimeout&&clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout(function(){var n=e.subject.part.data;n.key?(t.activeName="nodes",t.currKey=n.key):n.from&&(t.activeName="links",t.currKey="".concat(n.from,"_").concat(n.to))},300)},objectDbClick:function(e){this.clickTimeout&&clearTimeout(this.clickTimeout),this.clickTimeout=setTimeout(function(){console.log(e,"dbclick")},300)},bindEvents:function(){l[this.diagramName].addDiagramListener("ObjectSingleClicked",this.objectClick),l[this.diagramName].addDiagramListener("ObjectDoubleClicked",this.objectDbClick)},unbindEvents:function(){l[this.diagramName].removeDiagramListener("ObjectSingleClicked",this.objectClick),l[this.diagramName].removeDiagramListener("ObjectDoubleClicked",this.objectDbClick)}},created:function(){this.viewerVisible=this.visible},mounted:function(){document.body.appendChild(this.$el),l[this.diagramName]&&this.reloadDiagram()},beforeDestroy:function(){this.destroy(),this.unbindEvents()}},Q=Object(p.a)(q,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.viewerVisible,expression:"viewerVisible"},{name:"draggable",rawName:"v-draggable"}],staticClass:"xdh-go-viewer"},[e._t("default",[n("el-card",{staticClass:"xdh-go-viewer__container"},[n("div",{staticClass:"xdh-go-viewer__header",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("数据管理器")]),e._v(" "),n("el-button",{staticStyle:{float:"right",padding:"0"},attrs:{type:"text",circle:"",icon:"iconfont icon-multiply",size:"mini"},on:{click:e.close}})],1),e._v(" "),n("div",{staticClass:"xdh-go-viewer__content"},[n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"节点信息",name:"nodes"}},[n("el-tree",{ref:"nodeTree",attrs:{data:e.nodes,"expand-on-click-node":!1,"node-key":"key"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return[n("div",{class:["item",{active:i.key===e.currKey}],on:{click:function(t){return t.preventDefault(),e.findNode(i)}}},[0===i.level?n("span",[e._v("\n                    "+e._s(a.label)+"\n                    "),n("i",{staticClass:"iconfont icon-inquiry search",on:{click:function(t){return t.preventDefault(),e.findNode(i)}}})]):n("span",[e._v(e._s(a.label))])])]}}])})],1),e._v(" "),n("el-tab-pane",{attrs:{label:"关系信息",name:"links"}},[n("el-tree",{ref:"linkTree",attrs:{data:e.links,"expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return[n("div",{class:["item",{active:i.data.from+"_"+i.data.to===e.currKey}],on:{click:function(t){return t.preventDefault(),e.findNode(i)}}},[0===i.level?n("span",[e._v("\n                    "+e._s(a.label)+"\n                    "),n("i",{staticClass:"iconfont icon-inquiry search",on:{click:function(t){return t.preventDefault(),e.findNode(i)}}})]):n("span",[e._v(e._s(a.label))])])]}}])})],1),e._v(" "),n("el-tab-pane",{attrs:{label:"其它",name:"others"}},[n("el-tree",{attrs:{data:e.others,"expand-on-click-node":!1},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,i=t.data;return[n("div",{staticClass:"item"},[0===i.level?n("span",[e._v("\n                    "+e._s(a.label)+"\n                    "),n("i",{staticClass:"iconfont icon-inquiry search",on:{click:function(t){return t.preventDefault(),e.findNode(i)}}})]):n("span",[e._v(e._s(a.label))])])]}}])})],1)],1)],1)])])],2)},[],!1,null,"f3a70852",null).exports;Q.install=function(e){e.component(Q.name,Q)};var Z={name:"XdhGoTool",components:{XdhGoDraft:J,XdhGoViewer:Q},directives:{draggable:H},props:{diagramName:{type:String,default:"dig"}},data:function(){return{collapsed:!1,draftShow:!1,viewerShow:!1,dragOption:{handle:".xdh-go-tool__handle"}}},computed:{},methods:{clear:function(){l[this.diagramName].clear()},draft:function(){this.draftShow=!this.draftShow},viewDiagram:function(){this.viewerShow=!this.viewerShow,console.log(l[this.diagramName].model.toJson())}},created:function(){},mounted:function(){document.body.appendChild(this.$el)},beforeDestroy:function(){this.$refs.draft.destroy(),this.$refs.viewer.destroy(),this.$el.parentNode.removeChild(this.$el)}},ee=Object(p.a)(Z,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"draggable",rawName:"v-draggable",value:e.dragOption,expression:"dragOption"}],class:["xdh-go-tool",{collapsed:e.collapsed}]},[n("div",{staticClass:"expand"},[n("i",{staticClass:"iconfont icon-expand btn",on:{click:function(t){t.preventDefault(),e.collapsed=!e.collapsed}}})]),e._v(" "),n("div",{class:"xdh-go-tool__handle"},[n("span",{staticClass:"title"},[e._v("\n      gojs开发工具条\n      "),n("i",{staticClass:"iconfont icon-mid btn",on:{click:function(t){t.preventDefault(),e.collapsed=!e.collapsed}}})])]),e._v(" "),n("div",{staticClass:"xdh-go-tool__container"},[n("el-tooltip",{attrs:{effect:"dark",content:"清空画布",placement:"top-start"}},[n("el-button",{attrs:{size:"mini",type:"primary",circle:"",icon:"iconfont icon-delete"},on:{click:function(t){return e.clear()}}})],1),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"草稿箱",placement:"top-start"}},[n("el-button",{attrs:{size:"mini",type:"primary",circle:"",icon:"iconfont icon-paste"},on:{click:function(t){return e.draft()}}})],1),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"查看图数据",placement:"top-start"}},[n("el-button",{attrs:{size:"mini",type:"primary",circle:"",icon:"iconfont icon-collaboration"},on:{click:function(t){return e.viewDiagram()}}})],1)],1),e._v(" "),n("xdh-go-draft",{ref:"draft",attrs:{visible:e.draftShow,"diagram-name":e.diagramName},on:{"update:visible":function(t){e.draftShow=t}}}),e._v(" "),e.viewerShow?n("xdh-go-viewer",{ref:"viewer",attrs:{visible:e.viewerShow,"diagram-name":e.diagramName},on:{"update:visible":function(t){e.viewerShow=t}}}):e._e()],1)},[],!1,null,"35745ffa",null).exports;ee.install=function(e){e.component(ee.name,ee)};var te=ee;function ne(e,t,n,a){var i=e.diagram,r=i.viewportBounds,o=i.model,s=i.skipsUndoManager;i.skipsUndoManager=!0;for(var l=new n.Rect,c=t.nodeDataArray,d=0;d<c.length;d++){var u=c[d];if(u.bounds)if(u.bounds.intersectsRect(r)&&o.addNodeData(u),o instanceof n.TreeModel){var p=t.getParentKeyForNodeData(u),f=t.findNodeDataForKey(p);if(null!==f)if(u.bounds.intersectsRect(r)){o.addNodeData(f);var h=i.findNodeForData(u);if(null!==h)null!==(O=h.findTreeParentLink())&&(O.fromNode.ensureBounds(),O.toNode.ensureBounds(),O.updateRoute())}else if(l.set(u.bounds),l.unionRect(f.bounds),l.intersectsRect(r)){o.addNodeData(u);var g=i.findNodeForData(u);if(null!==g)null!==(O=g.findTreeParentLink())&&(O.fromNode.ensureBounds(),O.toNode.ensureBounds(),O.updateRoute())}}}if(o instanceof n.GraphLinksModel){var m=t.linkDataArray;for(d=0;d<m.length;d++){var y=m[d],b=t.getFromKeyForLinkData(y);if(void 0!==b){var v=t.findNodeDataForKey(b);if(null!==v&&v.bounds){var k=t.getToKeyForLinkData(y);if(void 0!==k){var O,j=t.findNodeDataForKey(k);if(null!==j&&j.bounds)if(l.set(v.bounds),l.unionRect(j.bounds),l.intersectsRect(r))o.addNodeData(v),o.addNodeData(j),o.addLinkData(y),null!==(O=i.findLinkForData(y))&&(O.fromNode.ensureBounds(),O.toNode.ensureBounds(),O.updateRoute())}}}}}i.skipsUndoManager=s,null===ae&&(ae=setTimeout(function(){!function(e,t,n){ae=null;var a=e.viewportBounds,i=e.model,r=[],o=new t.Set,s=e.nodes;for(;s.next();){var l=s.value,c=l.data;null!==c&&(l.actualBounds.intersectsRect(a)||l.isSelected||l.linksConnected.any(function(e){return e.actualBounds.intersectsRect(a)})||(r.push(c),i instanceof t.GraphLinksModel&&o.addAll(l.linksConnected)))}if(r.length>0){var d=e.skipsUndoManager;e.skipsUndoManager=!0,i.removeNodeDataCollection(r),i instanceof t.GraphLinksModel&&o.each(function(e){e.isSelected||i.removeLinkData(e.data)}),e.skipsUndoManager=d}n(e,e.layout.model)}(i,n,a)},3e3)),a(i,i.layout.model)}var ae=null;var ie=function(e){function t(){e.LayeredDigraphLayout.call(this),this.isOngoing=!1,this.model=null}function n(t){e.LayeredDigraphNetwork.call(this,t)}return e.Diagram.inherit(t,e.CircularLayout),t.prototype.createNetwork=function(){return new n(this)},t.prototype.makeNetwork=function(e){var t=this.createNetwork();return t.addData(this.model),t},t.prototype.commitLayout=function(){e.LayeredDigraphLayout.prototype.commitLayout.call(this),this.diagram.fixedBounds=function(e,t){for(var n=new t.Rect,a=e.nodeDataArray,i=0;i<a.length;i++){var r=a[i];if(r.bounds){var o=r.bounds;0===i?n.set(o):n.unionRect(o)}}return n}(this.model,e),this.diagram.nodes.each(function(e){e.updateTargetBindings()})},e.Diagram.inherit(n,e.LayeredDigraphNetwork),n.prototype.addData=function(t){if(!(t instanceof e.GraphLinksModel))throw new Error("can only handle GraphLinksModel data");for(var n=new e.Map,a=t.nodeDataArray,i=0;i<a.length;i++){var r=a[i],o=this.createVertex();o.data=r,n.set(t.getKeyForNodeData(r),o),this.addVertex(o)}var s=t.linkDataArray;for(i=0;i<s.length;i++){r=s[i];var l=n.get(t.getFromKeyForLinkData(r)),c=n.get(t.getToKeyForLinkData(r));if(null!==l&&null!==c){var d=this.createEdge();d.data=r,d.fromVertex=l,d.toVertex=c,this.addEdge(d)}}},n.prototype.deleteArtificialVertexes=function(){},t};function re(e,t,n,a){var i=e.diagram,r=i.viewportBounds,o=i.model,s=i.skipsUndoManager;i.skipsUndoManager=!0;for(var l=new n.Rect,c=t.nodeDataArray,d=0;d<c.length;d++){var u=c[d];if(u.bounds)if(u.bounds.intersectsRect(r)&&o.addNodeData(u),o instanceof n.TreeModel){var p=t.getParentKeyForNodeData(u),f=t.findNodeDataForKey(p);if(null!==f)if(u.bounds.intersectsRect(r)){o.addNodeData(f);var h=i.findNodeForData(u);if(null!==h)null!==(O=h.findTreeParentLink())&&(O.fromNode.ensureBounds(),O.toNode.ensureBounds(),O.updateRoute())}else if(l.set(u.bounds),l.unionRect(f.bounds),l.intersectsRect(r)){o.addNodeData(u);var g=i.findNodeForData(u);if(null!==g)null!==(O=g.findTreeParentLink())&&(O.fromNode.ensureBounds(),O.toNode.ensureBounds(),O.updateRoute())}}}if(o instanceof n.GraphLinksModel){var m=t.linkDataArray;for(d=0;d<m.length;d++){var y=m[d],b=t.getFromKeyForLinkData(y);if(void 0!==b){var v=t.findNodeDataForKey(b);if(null!==v&&v.bounds){var k=t.getToKeyForLinkData(y);if(void 0!==k){var O,j=t.findNodeDataForKey(k);if(null!==j&&j.bounds)if(l.set(v.bounds),l.unionRect(j.bounds),l.intersectsRect(r))o.addNodeData(v),o.addNodeData(j),o.addLinkData(y),null!==(O=i.findLinkForData(y))&&(O.fromNode.ensureBounds(),O.toNode.ensureBounds(),O.updateRoute())}}}}}i.skipsUndoManager=s,null===oe&&(oe=setTimeout(function(){!function(e,t,n){oe=null;var a=e.viewportBounds,i=e.model,r=[],o=new t.Set,s=e.nodes;for(;s.next();){var l=s.value,c=l.data;null!==c&&(l.actualBounds.intersectsRect(a)||l.isSelected||l.linksConnected.any(function(e){return e.actualBounds.intersectsRect(a)})||(r.push(c),i instanceof t.GraphLinksModel&&o.addAll(l.linksConnected)))}if(r.length>0){var d=e.skipsUndoManager;e.skipsUndoManager=!0,i.removeNodeDataCollection(r),i instanceof t.GraphLinksModel&&o.each(function(e){e.isSelected||i.removeLinkData(e.data)}),e.skipsUndoManager=d}n(e,e.layout.model)}(i,n,a)},3e3)),a(i,i.layout.model)}var oe=null;var se=function(e){function t(){e.ForceDirectedLayout.call(this),this.isOngoing=!1,this.model=null}function n(t){e.ForceDirectedNetwork.call(this,t)}return e.Diagram.inherit(t,e.ForceDirectedLayout),t.prototype.createNetwork=function(){return new n(this)},t.prototype.makeNetwork=function(e){var t=this.createNetwork();return t.addData(this.model),t},t.prototype.commitLayout=function(){e.ForceDirectedLayout.prototype.commitLayout.call(this),this.diagram.fixedBounds=function(e,t){for(var n=new t.Rect,a=e.nodeDataArray,i=0;i<a.length;i++){var r=a[i];if(r.bounds){var o=r.bounds;0===i?n.set(o):n.unionRect(o)}}return n}(this.model,e),this.diagram.nodes.each(function(e){e.updateTargetBindings()})},e.Diagram.inherit(n,e.ForceDirectedNetwork),n.prototype.addData=function(t){if(!(t instanceof e.GraphLinksModel))throw new Error("can only handle GraphLinksModel data");for(var n=new e.Map,a=t.nodeDataArray,i=0;i<a.length;i++){var r=a[i],o=this.createVertex();o.data=r,n.set(t.getKeyForNodeData(r),o),this.addVertex(o)}var s=t.linkDataArray;for(i=0;i<s.length;i++){r=s[i];var l=n.get(t.getFromKeyForLinkData(r)),c=n.get(t.getToKeyForLinkData(r));if(null!==l&&null!==c){var d=this.createEdge();d.data=r,d.fromVertex=l,d.toVertex=c,this.addEdge(d)}}},n.prototype.deleteArtificialVertexes=function(){},t};function le(e,t,n,a){var i=e.diagram,r=i.viewportBounds,o=i.model,s=i.skipsUndoManager;i.skipsUndoManager=!0;for(var l=new n.Rect,c=t.nodeDataArray,d=0;d<c.length;d++){var u=c[d];if(u.bounds&&(u.bounds.intersectsRect(r)&&o.addNodeData(u),o instanceof n.TreeModel)){var p=t.getParentKeyForNodeData(u),f=t.findNodeDataForKey(p);if(null!==f)if(u.bounds.intersectsRect(r)){o.addNodeData(f);var h=i.findNodeForData(u);if(null!==h)null!==(O=h.findTreeParentLink())&&(O.fromNode.ensureBounds(),O.toNode.ensureBounds(),O.updateRoute())}else if(l.set(u.bounds),l.unionRect(f.bounds),l.intersectsRect(r)){o.addNodeData(u);var g=i.findNodeForData(u);if(null!==g)null!==(O=g.findTreeParentLink())&&(O.fromNode.ensureBounds(),O.toNode.ensureBounds(),O.updateRoute())}}}if(o instanceof n.GraphLinksModel){var m=t.linkDataArray;for(d=0;d<m.length;d++){var y=m[d],b=t.getFromKeyForLinkData(y);if(void 0!==b){var v=t.findNodeDataForKey(b);if(null!==v&&v.bounds){var k=t.getToKeyForLinkData(y);if(void 0!==k){var O,j=t.findNodeDataForKey(k);if(null!==j&&j.bounds)if(l.set(v.bounds),l.unionRect(j.bounds),l.intersectsRect(r))o.addNodeData(v),o.addNodeData(j),o.addLinkData(y),null!==(O=i.findLinkForData(y))&&(O.fromNode.ensureBounds(),O.toNode.ensureBounds(),O.updateRoute())}}}}}i.skipsUndoManager=s,null===ce&&(ce=setTimeout(function(){!function(e,t,n){ce=null;var a=e.viewportBounds,i=e.model,r=[],o=new t.Set,s=e.nodes;for(;s.next();){var l=s.value,c=l.data;null!==c&&(l.actualBounds.intersectsRect(a)||l.isSelected||l.linksConnected.any(function(e){return e.actualBounds.intersectsRect(a)})||(r.push(c),i instanceof t.GraphLinksModel&&o.addAll(l.linksConnected)))}if(r.length>0){var d=e.skipsUndoManager;e.skipsUndoManager=!0,i.removeNodeDataCollection(r),i instanceof t.GraphLinksModel&&o.each(function(e){e.isSelected||i.removeLinkData(e.data)}),e.skipsUndoManager=d}n(e,e.layout.model)}(i,n,a)},3e3)),a(i,i.layout.model)}var ce=null;var de=function(e){function t(){e.TreeLayout.call(this),this.isOngoing=!1,this.model=null}function n(t){e.TreeNetwork.call(this,t)}return e.Diagram.inherit(t,e.TreeLayout),t.prototype.createNetwork=function(){return new n(this)},t.prototype.makeNetwork=function(e){var t=this.createNetwork();return t.addData(this.model),t},t.prototype.commitLayout=function(){e.TreeLayout.prototype.commitLayout.call(this),this.diagram.fixedBounds=function(e,t){for(var n=new t.Rect,a=e.nodeDataArray,i=0;i<a.length;i++){var r=a[i];r.bounds&&(0===i?n.set(r.bounds):n.unionRect(r.bounds))}return n}(this.model,e),this.diagram.nodes.each(function(e){e.updateTargetBindings()})},e.Diagram.inherit(n,e.TreeNetwork),n.prototype.addData=function(t){if(!(t instanceof e.TreeModel))throw new Error("can only handle TreeModel data");for(var n=new e.Map,a=t.nodeDataArray,i=0;i<a.length;i++){var r=a[i],o=this.createVertex();o.data=r,n.set(r,o),this.addVertex(o)}for(i=0;i<a.length;i++){var s=a[i],l=t.getParentKeyForNodeData(s),c=t.findNodeDataForKey(l);if(null!==c){var d=n.get(c),u=n.get(s);if(null===d||null===u)continue;var p=this.createEdge();p.data=s,p.fromVertex=d,p.toVertex=u,this.addEdge(p)}}},t};var ue={};var pe={GridLayout:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({},ue,{wrappingColumn:10,sorting:t.GridLayout.Forward,spacing:new t.Size(50,50)},n);return e(t.GridLayout,a)},CircularLayout:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({},ue,{arrangement:t.CircularLayout.Packed,spacing:10},n);return e(t.CircularLayout,a)},LayeredDigraphLayout:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({},ue,{setsPortSpots:!1,layerSpacing:0,layeringOption:t.LayeredDigraphLayout.LayerLongestPathSource},n);return e(t.LayeredDigraphLayout,a)},ForceDirectedLayout:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({},ue,{arrangementSpacing:new t.Size(100,100),defaultElectricalCharge:50,defaultSpringLength:10,defaultSpringStiffness:.01},n);return e(t.ForceDirectedLayout,a)},TreeLayout:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({},ue,n);return e(t.TreeLayout,a)},VirtualizedForceDirectedLayout:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.VirtualizedForceDirectedLayout||(t.VirtualizedForceDirectedLayout=se(t)),e(t.VirtualizedForceDirectedLayout,n)},handlerVirtualForce:function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;t.isVirtualized=!0,a&&(t.layout.model=n,t.addDiagramListener("ViewportBoundsChanged",function(n){re(n,t.layout.model,e,i)}),t.addDiagramListener("InitialLayoutCompleted",function(e){var n=t.layout.model.findNodeDataForKey("1");null!==n&&t.centerRect(n.bounds)}),t.addDiagramListener("SelectionDeleted",function(n){var a=n.subject,i=[],r=[];a.each(function(t){t instanceof e.Node?i.push(t.data):t instanceof e.Link&&r.push(t.data)}),t.layout.model.removeNodeDataCollection(i),t.layout.model.removeLinkDataCollection(r)})),r&&t.delayInitialization(function(){r()})},VirtualizedTreeLayout:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.VirtualizedTreeLayout||(t.VirtualizedTreeLayout=de(t)),e(t.VirtualizedTreeLayout,n)},handlerVirtualTree:function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;t.isVirtualized=!0,a&&(t.layout.model=n,t.addDiagramListener("ViewportBoundsChanged",function(n){le(n,t.layout.model,e,i)}),t.addDiagramListener("InitialLayoutCompleted",function(e){var n=t.layout.model.findNodeDataForKey("1");null!==n&&t.centerRect(n.bounds)}),t.addDiagramListener("SelectionDeleted",function(n){var a=n.subject,i=[];a.each(function(t){t instanceof e.Node&&i.push(t.data)}),t.layout.model.removeNodeDataCollection(i)})),r&&t.delayInitialization(function(){r()})},VirtualizedLayeredDigraphLayout:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.VirtualizedLayeredDigraphLayout||(t.VirtualizedLayeredDigraphLayout=ie(t)),e(t.VirtualizedLayeredDigraphLayout,n)},handlerVirtualLayeredDigraph:function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;t.isVirtualized=!0,a&&(t.layout.model=n,t.addDiagramListener("ViewportBoundsChanged",function(n){ne(n,t.layout.model,e,i)}),t.addDiagramListener("InitialLayoutCompleted",function(e){var n=t.layout.model.findNodeDataForKey("1");null!==n&&t.centerRect(n.bounds)}),t.addDiagramListener("SelectionDeleted",function(n){var a=n.subject,i=[],r=[];a.each(function(t){t instanceof e.Node?i.push(t.data):t instanceof e.Link&&r.push(t.data)}),t.layout.model.removeNodeDataCollection(i),t.layout.model.removeLinkDataCollection(r)})),r&&t.delayInitialization(function(){r()})}},fe=r.a.GraphObject.make,he={name:"XdhGoLayout",props:{diagramName:{type:String,default:"dig"},lock:{type:Boolean,default:!1},customClass:{type:String,default:""},customStyle:{type:Object,default:function(){return{}}}},data:function(){return{currLayout:"LayeredDigraphLayout",lockState:!1,currOption:{}}},watch:{lock:{immediate:!0,handler:function(e){this.lockState=e}},lockState:function(e){this.$emit("update:lock",e)},diagram:{handler:function(e){var t=this;e&&(this.unbindEvents(),setTimeout(function(){t.bindEvents()},100))}}},computed:{},methods:{toggleLock:function(){if(this.lockState=!this.lockState,this.lockState){var e=fe(r.a.Layout);l[this.diagramName].layout=e,l[this.diagramName].layoutDiagram(!0)}else{var t=this.currLayout,n=this.currOption;if("GridLayout"===t){var a=l[this.diagramName].model.nodeDataArray.length,i=Math.floor(Math.sqrt(a))+1;n.wrappingColumn=i}var o=this.getAllNodesAndLinks();this.setNodesFixed(o,!1);var s=pe[t](fe,r.a,n);s.isOngoing=!0,l[this.diagramName].layout=s,l[this.diagramName].layoutDiagram(!0)}},changeLayout:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.$emit("on-change",e),this.currOption=t,this.currLayout=e,this.lockState)if(l[this.diagramName].layout=fe(r.a.Layout),l[this.diagramName].layoutDiagram(!0),0!==l[this.diagramName].selection.count){var n,a,i=new r.a.Set;l[this.diagramName].selection.each(function(e){i.add(e),(!n||e.position.x<n)&&(n=e.position.x),(!a||e.position.y<a)&&(a=e.position.y)});var o=new r.a.Point(n,a);this.layoutNodes(fe,r.a,e,i,o,t)}else{var s=this.getAllNodesAndLinks();this.setNodesFixed(s,!0),this.layoutNodes(fe,r.a,e,s,void 0,t)}else{var c;if(0!==l[this.diagramName].selection.count?(c=new r.a.Set,l[this.diagramName].nodes.each(function(e){e.isLayoutPositioned=!1}),l[this.diagramName].selection.each(function(e){c.add(e)})):c=this.getAllNodesAndLinks(),this.setNodesFixed(c,!1),"GridLayout"===e){var d=l[this.diagramName].model.nodeDataArray.length,u=Math.floor(Math.sqrt(d))+1;t.wrappingColumn=u}var p=pe[e](fe,r.a,t);p.isOngoing=!0,l[this.diagramName].layout=p,l[this.diagramName].layoutDiagram(!0)}},getAllNodesAndLinks:function(){var e=new r.a.Set;return l[this.diagramName].nodes.each(function(t){e.add(t)}),l[this.diagramName].links.each(function(t){e.add(t)}),e},layoutNodes:function(e,t,n,a,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};if("GridLayout"===n){var o=l[this.diagramName].model.nodeDataArray.length,s=Math.floor(Math.sqrt(o))+1;r.wrappingColumn=s}var c=pe[n](e,t,r);l[this.diagramName].layout.isOngoing=!1,this.setNodesFixed(a,!1),c.doLayout(a),this.setNodesFixed(a,!0),l[this.diagramName].layout.isOngoing=!0,i&&"ForceDirectedLayout"!==n&&l[this.diagramName].moveParts(a,i)},setNodesFixed:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.each(function(e){e.isLayoutPositioned=!t})},layoutAfterAdd:function(e,t){var n=this;if(!e||0!==e.length){var a={},i="data";e[0].diagram&&(i="node"),e.forEach(function(e){a[e.key]=e});var o=null;if(e.forEach(function(e){var t;(t="node"===i?e:l[n.diagramName].findNodeForData(e))&&t.findNodesConnected().each(function(e){a[e.key]||(o=e)})}),!o)("node"===i?e[0]:l[this.diagramName].findNodeForData(e[0])).findNodesConnected().each(function(e){o=e});var s=new r.a.Set,c=o.findTreeChildrenNodes(),d=o.findTreeChildrenLinks(),u=o.position.x,p=o.position.y;s.add(o),c&&c.each(function(e){s.add(e),0!==e.position.x&&0!==e.position.y&&((!u||e.position.x<u)&&(u=e.position.x),(!p||e.position.y<p)&&(p=e.position.y))});var f=new r.a.Point(u,p);e.forEach(function(e){var t;(t="node"===i?e:l[n.diagramName].findNodeForData(e)).position=f,s.add(t)}),t&&0!==t.length&&t.forEach(function(e){var t;t="node"===i?e:l[n.diagramName].findLinkForData(e),s.add(t)}),d&&d.each(function(e){s.add(e)}),this.layoutNodes(fe,r.a,this.currLayout,s,f,this.currOption)}},bindEvents:function(){},unbindEvents:function(){}},created:function(){}},ge=Object(p.a)(he,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"xdh-go-layout__menu "+e.customClass,style:e.customStyle},[e._t("default",[n("ul",[n("li",{on:{click:function(t){return e.toggleLock()}}},[n("el-tooltip",{attrs:{content:"固定布局切换",placement:"left",effect:"light"}},[e.lock?n("i",{staticClass:"iconfont icon-pin icon"}):e._e(),e._v(" "),e.lock?e._e():n("i",{staticClass:"iconfont icon-map-thumbtack icon"})])],1),e._v(" "),n("li",[n("el-tooltip",{attrs:{content:"分层",placement:"left",effect:"light","popper-class":"invest-graph"}},[n("i",{staticClass:"iconfont icon-Tandem icon"})]),e._v(" "),n("ul",[n("li",{on:{click:function(t){return e.changeLayout("LayeredDigraphLayout",{direction:270})}}},[n("i",{staticClass:"iconfont icon-arrow-up icon"})]),e._v(" "),n("li",{on:{click:function(t){return e.changeLayout("LayeredDigraphLayout",{direction:90})}}},[n("i",{staticClass:"iconfont icon-arrow-down icon"})]),e._v(" "),n("li",{on:{click:function(t){return e.changeLayout("LayeredDigraphLayout",{direction:180})}}},[n("i",{staticClass:"iconfont icon-arrow-left icon"})]),e._v(" "),n("li",{on:{click:function(t){return e.changeLayout("LayeredDigraphLayout",{direction:0})}}},[n("i",{staticClass:"iconfont icon-arrow-right icon"})])])],1),e._v(" "),n("li",{on:{click:function(t){return e.changeLayout("ForceDirectedLayout")}}},[n("el-tooltip",{attrs:{content:"力导向",placement:"left",effect:"light","popper-class":"invest-graph"}},[n("i",{staticClass:"iconfont icon-relation icon"})])],1),e._v(" "),n("li",{on:{click:function(t){return e.changeLayout("GridLayout")}}},[n("el-tooltip",{attrs:{content:"网格",placement:"left",effect:"light","popper-class":"invest-graph"}},[n("i",{staticClass:"iconfont icon-nine-squares icon"})])],1),e._v(" "),n("li",{on:{click:function(t){return e.changeLayout("CircularLayout")}}},[n("el-tooltip",{attrs:{content:"圆形",placement:"left",effect:"light","popper-class":"invest-graph"}},[n("i",{staticClass:"iconfont icon-collaboration-system icon"})])],1),e._v(" "),n("li",[n("el-tooltip",{attrs:{content:"树形",placement:"left",effect:"light","popper-class":"invest-graph"}},[n("i",{staticClass:"iconfont icon-map-site icon"})]),e._v(" "),n("ul",{staticClass:"bottom"},[n("li",{on:{click:function(t){return e.changeLayout("TreeLayout",{angle:270})}}},[n("i",{staticClass:"iconfont icon-arrow-up icon"})]),e._v(" "),n("li",{on:{click:function(t){return e.changeLayout("TreeLayout",{angle:90})}}},[n("i",{staticClass:"iconfont icon-arrow-down icon"})]),e._v(" "),n("li",{on:{click:function(t){return e.changeLayout("TreeLayout",{angle:180})}}},[n("i",{staticClass:"iconfont icon-arrow-left icon"})]),e._v(" "),n("li",{on:{click:function(t){return e.changeLayout("TreeLayout",{angle:0})}}},[n("i",{staticClass:"iconfont icon-arrow-right icon"})])])],1)])],{toggleLock:e.toggleLock,changeLayout:e.changeLayout})],2)},[],!1,null,null,null).exports;ge.install=function(e){e.component(ge.name,ge)};var me=ge,ye=[{name:"隐藏",icon:"iconfont icon-magic",subMenu:[{name:"隐藏节点"},{name:"隐藏子节点"},{name:"隐藏关系label"},{name:"隐藏关系连线"}]},{name:"显示",icon:"iconfont icon-enlarge",subMenu:[{name:"显示子节点"},{name:"显示关系label"},{name:"显示关系连线"}]},{name:"查看全部",icon:"iconfont icon-bullseye"},{name:"缩小",icon:"iconfont icon-zoomout"},{name:"放大",icon:"iconfont icon-enlarge"}],be={name:"XdhGoView",components:{},props:{diagramName:{type:String,default:"dig"},customClass:{type:String,default:""},customStyle:{type:Object,default:function(){return{}}},menus:{type:Array,default:function(){return[]}},handlers:{type:Object,default:function(){return{}}}},data:function(){var e=this;return{menuOption:0!==e.menus.length?e.menus.filter(function(e){return!1!==e.visible}):JSON.parse(JSON.stringify(ye)),disabledAll:!1}},computed:{},methods:{toggleDisabledAll:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.disabledAll=e},menuClick:function(e){var t=e.name;if(this.$emit("item-click",e),this.handlers[t])this.handlers[t](l[this.diagramName],r.a.GraphObject.make,r.a,e);else{var n=new r.a.Set,a=l[this.diagramName],i=a.model;switch(t){case"隐藏节点":a.selection.each(function(e){e instanceof r.a.Node&&n.add(e)}),n.each(function(e){e.visible=!1});break;case"隐藏关系label":i.setDataProperty(l[this.diagramName].model.modelData,"showLinkLabels",!1);break;case"隐藏关系连线":i.setDataProperty(l[this.diagramName].model.modelData,"showLinks",!1);break;case"隐藏子节点":a.selection.each(function(e){e instanceof r.a.Node&&n.add(e)}),n.each(function(e){e.collapseTree(1)});break;case"显示子节点":a.selection.each(function(e){e instanceof r.a.Node&&n.add(e)}),n.each(function(e){e.expandTree(1),e.findTreeChildrenNodes().each(function(e){e.visible=!0})});break;case"显示关系label":i.setDataProperty(i.modelData,"showLinkLabels",!0);break;case"显示关系连线":i.setDataProperty(i.modelData,"showLinks",!0);break;case"查看全部":a.zoomToFit();break;case"缩小":a.scale=a.scale-.2;break;case"放大":a.scale=a.scale+.2}}}},created:function(){}},ve=(n(359),Object(p.a)(be,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"xdh-go__view "+e.customClass,style:e.customStyle},[e._t("default",[n("div",{staticClass:"xdh-go__menu"},e._l(e.menuOption,function(t,a){return n("div",{key:a,class:{"xdh-go__box":!0,disabled:t.disabled||e.disabledAll}},[t.subMenu?e._e():n("div",{on:{click:function(n){return e.menuClick(t)}}},[n("div",{staticClass:"icon-con"},[n("i",{class:t.icon})]),e._v(" "),n("div",{staticClass:"box"},[e._v(e._s(t.name))])]),e._v(" "),t.subMenu?n("div",[n("div",{staticClass:"icon-con"},[n("i",{class:t.icon})]),e._v(" "),n("el-dropdown",{staticClass:"submenu",attrs:{trigger:"click"},on:{command:function(t){return e.menuClick(t)}}},[n("span",{class:{"el-dropdwon-link":!0,disabled:t.disabled||e.disabledAll}},[e._v("\n              "+e._s(t.name)+"\n              "),n("i",{staticClass:"iconfont icon-bold-arrow-down",staticStyle:{"margin-left":"5px"}})]),e._v(" "),n("el-dropdown-menu",{staticClass:"xdh-go__dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(t.subMenu,function(t,a){return n("el-dropdown-item",{key:a,attrs:{command:t,disabled:t.disabled}},[e._v(e._s(t.name))])}),1)],1)],1):e._e()])}),0)],{menus:e.menuOption,menuClick:e.menuClick})],2)},[],!1,null,"3e8ad4d2",null).exports);ve.install=function(e){e.component(ve.name,ve)};var ke=ve,Oe=(n(274),[{name:"选择",icon:"iconfont icon-indicator",subMenu:[{name:"框选",tips:"点击框选或长按鼠标拖动可框选"},{name:"多选",tips:"点击多选或按住ctrl可多选"},{name:"全选",tips:"全选节点"},{name:"反选",tips:"反选节点"},{name:"选中子节点",tips:"选中指定节点的子节点"}]}]),je={name:"XdhGoSelect",props:{diagramName:{type:String,default:"dig"},showTips:{type:Boolean,default:!0},customClass:{type:String,default:""},customStyle:{type:Object,default:function(){return{}}},itemMap:{type:Object,default:function(){return{normal:"普通",rect:"框选",multi:"多选",all:"全选",reverse:"反选",child:"选中子节点"}}},menus:{type:Array,default:function(){return Oe.filter(function(e){return!1!==e.visible})}}},data:function(){return{itemReverseMap:{},disabledAll:!1,selectMode:"normal"}},computed:{alertTips:function(){return"rect"===this.selectMode?"开始框选，按住ctrl可框选多处，点击esc退出":"multi"===this.selectMode?"开始多选，点击esc退出":"切换到普通模式"}},methods:{resetEvents:function(){var e=this;this.unbindDiagramEvent(),setTimeout(function(){e.bindDiagramEvent(l[e.diagramName],r.a.GraphObject.make,r.a)},300)},keyupHandler:function(e){switch(e.preventDefault(),e.key){case"Escape":this.resetMode()}},resetMode:function(){this.setSelectMode("normal")},toggleDisabledAll:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.disabledAll=e},setSelectMode:function(e){var t=this,n=l[this.diagramName],a=n.model;if(a.setDataProperty(a.modelData,"selectMode",e),this.selectMode=e,n.clearHighlighteds(),"rect"===e)n.toolManager.dragSelectingTool.delay=0;else if("all"===e)n.commandHandler.selectAll();else if("reverse"===e)n.nodes.each(function(e){e.isSelected=!e.isSelected});else if("child"===e){var i=this.getSelections(!0),o=new r.a.Set;i.each(function(e){o.add(e)}),n.clearSelection(),o.each(function(e){t.selectChildren(e)})}else if("multi"===e)n.clearSelection();else if("normal"===e){var s=this.diagramName;l[s].toolManager.dragSelectingTool.delay=200}this.$emit("on-change",e)},getSelections:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e)return l[this.diagramName].selection;var t=[];return l[this.diagramName].selection.each(function(e){t.push(e.data)}),t},selectChildren:function(e){var t=e.findTreeChildrenNodes();t&&t.each(function(e){e.isSelected=!0})},menuClick:function(e){switch(this.$emit("item-click",e),this.itemReverseMap[e]){case"rect":this.setSelectMode("rect");break;case"multi":this.setSelectMode("multi");break;case"all":this.setSelectMode("all");break;case"reverse":this.setSelectMode("reverse");break;case"child":this.setSelectMode("child")}},bindDiagramEvent:function(e,t,n){var a=this;l[this.diagramName].addDiagramListener("BackgroundSingleClicked",this.backgroundClick),e.addDiagramListener("ObjectSingleClicked",this.nodeClickSelect),e.commandHandler.doKeyDown=function(){var t=e.lastInput,a=e.commandHandler;"Esc"!==t.key&&n.CommandHandler.prototype.doKeyDown.call(a)},e.toolManager.clickSelectingTool.doMouseUp=function(){var t=e.lastInput,i=e.toolManager.clickSelectingTool;if(["multi"].includes(a.selectMode)){if(0===t.button){var r=e.findObjectAt(t.documentPoint,function(e){return e.part},function(e){return e.canSelect()});r?r.isSelected=!0:(e.clearSelection(),a.resetMode()),e.clearHighlighteds()}}else n.ClickSelectingTool.prototype.doMouseUp.call(i)},e.toolManager.draggingTool.doMouseMove=function(){var t=e.toolManager.draggingTool;n.DraggingTool.prototype.doMouseMove.call(t),e.layout.invalidateLayout()}},nodeClickSelect:function(e){var t=e.subject.part,n=!1;return"multi"===this.selectMode&&(l[this.diagramName].clearHighlighteds(),n=!0),t.isSelected=!0,n},backgroundClick:function(){this.resetMode(),l[this.diagramName].clearSelection()},unbindDiagramEvent:function(){l[this.diagramName].removeDiagramListener("BackgroundSingleClicked",this.backgroundClick),l[this.diagramName].removeDiagramListener("ObjectSingleClicked",this.nodeClickSelect),l[this.diagramName].toolManager.draggingTool.doMouseMove=r.a.DraggingTool.prototype.doMouseMove;var e=this.diagramName;l[e].toolManager.clickSelectingTool.doMouseUp=r.a.ClickSelectingTool.prototype.doMouseUp,l[this.diagramName].commandHandler.doKeyDown=r.a.CommandHandler.prototype.doKeyDown}},mounted:function(){l[this.diagramName]&&this.bindDiagramEvent(l[this.diagramName],r.a.GraphObject.make,r.a),window.addEventListener("keyup",this.keyupHandler)},created:function(){var e={};Object.entries(this.itemMap).forEach(function(t){e[t[1]]=t[0]}),this.itemReverseMap=e},beforeDestroy:function(){window.removeEventListener("keyup",this.keyupHandler),this.unbindDiagramEvent()}},we=Object(p.a)(je,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"xdh-go__select "+e.customClass,style:e.customStyle},[e._t("tips",[e.showTips?n("el-alert",{directives:[{name:"show",rawName:"v-show",value:["rect","multi"].includes(e.selectMode),expression:"['rect', 'multi'].includes(selectMode)"}],staticClass:"xdh-go__tips",attrs:{title:""+e.alertTips,closable:!1,type:"warning"}}):e._e()],{alertTips:e.alertTips,showTips:e.showTips}),e._v(" "),e._t("default",[n("div",{staticClass:"xdh-go__menu"},e._l(e.menus,function(t,a){return n("div",{key:a,class:{"xdh-go__box":!0,disabled:t.disabled||e.disabledAll}},[t.subMenu?e._e():n("div",{on:{click:function(n){return e.menuClick(t.name)}}},[n("div",{staticClass:"icon-con"},[n("i",{class:t.icon})]),e._v(" "),n("div",{staticClass:"box"},[e._v(e._s(t.name))])]),e._v(" "),t.subMenu?n("div",[n("div",{staticClass:"icon-con"},[n("i",{class:t.icon})]),e._v(" "),n("el-dropdown",{staticClass:"submenu",attrs:{trigger:"click"},on:{command:function(t){return e.menuClick(t)}}},[n("span",{class:{"el-dropdwon-link":!0,disabled:t.disabled||e.disabledAll}},[e._v("\n              "+e._s(t.name)+"\n              "),n("i",{staticClass:"iconfont icon-bold-arrow-down",staticStyle:{"margin-left":"5px"}})]),e._v(" "),n("el-dropdown-menu",{staticClass:"xdh-go__dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},e._l(t.subMenu,function(t,a){return n("el-dropdown-item",{key:a,class:{active:t.name===e.itemMap[e.selectMode]},attrs:{command:t.name,disabled:t.disabled}},[n("el-popover",{ref:"popover",refInFor:!0,staticClass:"xdh-go__dropitem",attrs:{placement:"right",trigger:"hover",content:t.tips}},[n("div",{attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(t.name))])])],1)}),1)],1)],1):e._e()])}),0)],{menus:e.menus,menuClick:e.menuClick})],2)},[],!1,null,"8a20300e",null).exports;we.install=function(e){e.component(we.name,we)};var Ne=we,_e=(n(154),{name:"XdhGoSearch",components:{},props:{diagramName:{type:String,default:"dig"},pullCenter:{type:Boolean,default:!0},ignoreCase:{type:Boolean,default:!0},nodeKeys:{type:Array,default:function(){return["key"]}},linkKeys:{type:Array,default:function(){return["key"]}},mode:{type:String,default:function(){return"node"},validator:function(e){return["node","link","node,link","link,node"].includes(e)}},customClass:{type:String,default:""},customStyle:{type:Object,default:function(){return{}}},popDuration:{type:Number,default:5e3}},data:function(){return{keyword:"",keywordCache:"",resultCache:[],index:0,searchResult:{},popoverShow:!1,popTimeout:null}},computed:{},methods:{keywordChange:function(){this.searchResult={}},search:function(){var e=this;if(this.keyword)if(clearTimeout(this.popTimeout),this.keyword===this.keywordCache?this.index=(this.index+1)%this.resultCache.length:this.index=0,this.searchNode(),0!==this.resultCache.length){this.searchResult=this.resultCache[this.index],this.popDuration&&this.searchResult.hit&&(this.popoverShow=!0),this.popTimeout=setTimeout(function(){e.popoverShow=!1},this.popDuration);var t=this.searchResult.node;if(t.isSelected=!0,this.pullCenter){var n=t.actualBounds;l[this.diagramName].centerRect(n)}this.$emit("on-search",t,this.resultCache,this.index,this.keyword)}else this.$emit("on-error","no-result");else this.$emit("on-error","keyword-empty")},searchNode:function(){var e=this;this.keywordCache=this.keyword,l[this.diagramName].clearSelection();var t=[];this.mode.includes("node")&&l[this.diagramName].nodes.each(function(n){var a=!1,i=[],r=[];e.nodeKeys.forEach(function(t){var o=t.split("."),s=e.getData(n.data,o);"string"==typeof s&&(e.ignoreCase?s.toLowerCase().includes(e.keyword.toLowerCase())&&(a=!0,i.push(t),r.push("".concat(s))):s.includes(e.keyword)&&(a=!0,i.push(t),r.push("".concat(s))))}),a&&t.push({type:"node",keyword:i.join(","),hit:r.join("\n"),node:n})}),this.mode.includes("link")&&l[this.diagramName].links.each(function(n){var a=!1,i=[],r=[];e.linkKeys.forEach(function(o){var s=o.split("."),l=e.getData(n.data,s);"string"==typeof l&&(e.ignoreCase?l.toLowerCase().includes(e.keyword.toLowerCase())&&(a=!0,i.push(o),r.push("".concat(l))):l.includes(e.keyword)&&(a=!0,i.push(o),r.push("".concat(l)))),a&&t.push({type:"link",keyword:i.join(","),hit:r.join("\n"),node:n})})}),0!==t.length?this.resultCache=t:this.resultCache=[]},getData:function(e,t){if(0!==t.length){var n=t.shift();return e[n]?this.getData(e[n],t):""}return e}},created:function(){}}),xe=Object(p.a)(_e,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:"xdh-go-search "+e.customClass,style:e.customStyle,on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}}},[e._t("default",[n("el-popover",{ref:"popover",attrs:{trigger:"manual",placement:"bottom"},model:{value:e.popoverShow,callback:function(t){e.popoverShow=t},expression:"popoverShow"}},[e._t("popover",[n("div",[e._v("比中类型: "+e._s(e.searchResult.type))]),e._v(" "),n("div",[e._v("关键字: "+e._s(e.keyword))]),e._v(" "),n("div",[e._v("比中字段: "+e._s(e.searchResult.keyword))]),e._v(" "),n("div",[e._v("比中内容: "+e._s(e.searchResult.hit))])],{searchResult:e.searchResult,keyword:e.keyword})],2),e._v(" "),n("el-input",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"xdh-go-search__input",attrs:{placeholder:"输入检索内容",size:"small",clearable:""},on:{change:e.keywordChange},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],{search:e.search,keyword:e.keyword,searchResult:e.searchResult,resultCache:e.resultCache,index:e.index,popoverShow:e.popoverShow})],2)},[],!1,null,"0d6c9700",null).exports;xe.install=function(e){e.component(xe.name,xe)};var De=xe,Se=n(149);function Le(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({props:{},parts:[],events:{},binding:[]},t);for(var a in e)n.props[a]=void 0===n.props[a]?e[a]:n.props[a];return n}function Ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},{diagram:null,nodes:[],links:[],mode:"select"},e);if(t.diagram){var n=t.diagram.model;t.diagram.nodes.each(function(e){if(t.nodes.indexOf(e)>-1)switch(t.mode){case"select":e.isSelected=!0;break;case"highlight":e.isHighlighted=!0}else n.set(e.data,"isGray",!0)}),t.diagram.links.each(function(e){if(t.links.indexOf(e)>-1)switch(t.mode){case"select":e.isSelected=!0;break;case"highlight":e.isHighlighted=!0}else n.set(e.data,"isGray",!0)})}}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},{diagram:null,reset:!0},e);if(t.diagram){var n=t.diagram.model;t.diagram.nodes.each(function(e){n.set(e.data,"isGray",!1),e.isSelected=!1,e.isHighlighted=!1}),t.diagram.links.each(function(e){n.set(e.data,"isGray",!1),e.isSelected=!1,e.isHighlighted=!1})}}var Me=function(e,t,n){var a=Le({background:"rgba(0, 0, 0, 0)",alignment:t.Spot.Center},n);return e.apply(void 0,[t.Panel,t.Panel.Horizontal,a.props].concat(Object(Se.a)(a.parts),[a.events],Object(Se.a)(a.binding)))},Ae=function(e,t,n){var a=Le({background:"rgba(0, 0, 0, 0)",alignment:t.Spot.Center},n);return e.apply(void 0,[t.Panel,t.Panel.Vertical,a.props].concat(Object(Se.a)(a.parts),[a.events],Object(Se.a)(a.binding)))},Te=function(e,t,n){var a=Le({background:"rgba(0, 0, 0, 0)",alignment:t.Spot.Center},n);return e.apply(void 0,[t.Panel,"Spot",a.props].concat(Object(Se.a)(a.parts),[a.events],Object(Se.a)(a.binding)))},Fe=function(e,t,n){var a=Le({},n),i=Ee[a.type]||a.type||"Auto";return e.apply(void 0,[t.Panel,i,a.props].concat(Object(Se.a)(a.parts),[a.events],Object(Se.a)(a.binding)))},Ee={spot:"Spot",hor:"Horizontal",ver:"Vertical",table:"Table",pos:"Position",auto:"Auto",vbox:"Viewbox",link:"Link",grid:"Grid",grad:"Graduated"},Ie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={font:'30px "iconfont"',stroke:"#000",wrap:t.TextBlock.OverflowEllipsis,editable:!1,textAlign:"center",alignment:t.Spot.Center,verticalAlignment:t.Spot.Top,scale:1},i=Object.assign({icon:"",props:{},parts:[],binding:[],events:{}},n);return i.props=Object.assign({},a,n.props),e.apply(void 0,[t.TextBlock,"".concat(i.icon),i.props].concat(Object(Se.a)(i.binding)))};function Re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.spot||new t.Spot(.5,.5),i={fill:null,stroke:null,desiredSize:new t.Size(7,7),alignment:a,alignmentFocus:a,fromSpot:a,toSpot:a,fromLinkable:!0,toLinkable:!0,cursor:"pointer"},r=Object.assign({props:{},parts:[],events:{},binding:[]},n);return r.props=Object.assign({},i,n.props),r.type=r.type||"Circle",e.apply(void 0,[t.Shape,r.type,r.props,r.events].concat(Object(Se.a)(r.parts),Object(Se.a)(r.binding)))}var Be=function(e,t,n){var a=Le({background:"rgba(0, 0, 0, 0)",cursor:"pointer",selectionAdorned:!1},n),i=Ee[a.type]||a.type||"Auto";return e.apply(void 0,[t.Node,i,a.props,a.events].concat(Object(Se.a)(a.parts),Object(Se.a)(a.binding)))},ze=function(e,t,n){var a=Le({background:"rgba(0, 0, 0, 0)",cursor:"pointer",selectionAdorned:!1},n),i=Ee[a.type]||a.type||"Auto";return e.apply(void 0,[t.Group,i,a.props,a.events].concat(Object(Se.a)(a.parts),Object(Se.a)(a.binding)))};function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var Ge=function(e,t,n){var a=Object.assign({props:{},parts:[],events:{},binding:[],clip:{props:{},binding:[]},panel:{type:"Spot",props:{},binding:[]}},n);a.props=Object.assign({},{sourceCrossOrigin:function(){return"use-credentials"},width:60,height:60},n.props);a.clip=a.clip||{props:{},binding:[]};var i=Object.assign({},{figure:"Circle"},(n.clip||{}).props||{});a.clip.props=i,a.clip.props.width=a.clip.props.width||a.props.width,a.clip.props.height=a.clip.props.height||a.props.height,a.clip.binding=(n.clip||{}).binding||[],!1!==n.clip&&null!==n.clip||(a.clip.props.visible=!1);var r=e.apply(void 0,[t.Shape,Ke({},a.clip.props)].concat(Object(Se.a)(a.clip.binding)));return a.panel.props=Object.assign({},{name:"image",isClipping:!0,scale:1,visible:!0},(n.panel||{}).props||{}),a.panel.type=(n.panel||{}).type||"Spot",a.panel.binding=(n.panel||{}).binding||[],e.apply(void 0,[t.Panel,t.Panel[a.panel.type],Ke({},a.panel.props),r,e.apply(void 0,[t.Picture,a.props].concat(Object(Se.a)(a.binding)))].concat(Object(Se.a)(a.panel.binding)))},We=n(166);function He(e,t,n,a,i){var r,o;r=null!==n.shape,o="number"==typeof n.padding?n.padding:n.padding instanceof Array?Object(We.a)(t.Margin,Object(Se.a)(n.padding)):a.padding;var s={name:n.name||a.name,isClipping:r,scale:n.scale||a.scale,padding:o};return void 0!==n.position&&("Spot"===i?s.alignment=Object(We.a)(t.Spot,Object(Se.a)(n.position)):"Position"===i&&(s.position=Object(We.a)(t.Point,Object(Se.a)(n.position)))),Ge(e,t,{props:{width:n.width||a.width,height:n.height||a.height,source:n.src||a.src},binding:[new t.Binding("source","source")],clip:{props:{figure:n.shape||a.shape,width:n.width||a.width,height:n.height||a.height}},panel:{type:t.PanelLayout[n.layout||"Spot"],props:s}})}var Ve=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={name:"",src:"",scale:1,width:60,height:60,padding:2,shape:"Circle"},i={width:80,height:80,figure:"Circle"},r=Object.assign({layout:"Spot",isClipping:!1,clip:{},props:{},binding:[],images:[]},n),o=[];return r.images.forEach(function(n){o.push(He(e,t,n,a,r.layout))}),r.clips=Object.assign({},i,r.clips),Fe(e,t,{type:r.layout,props:{isClipping:r.isClipping},parts:[e(t.Shape,"Circle",{width:r.clip.width,height:r.clip.height,fill:"red",stroke:null,alignment:t.Spot.Center,visible:r.isClipping,figure:r.clip.figure||"Circle"}),e(t.Shape,"Circle",{width:2,height:2,name:"imageSetLoc",fill:"transparent",stroke:null,alignment:t.Spot.Center})].concat(o),binding:r.binding})},Ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={stroke:"#000",text:"default Text",textAlign:"center",verticalAlignment:t.Spot.Center,scale:1},i=Object.assign({props:{},parts:[],binding:[],events:{}},n);return i.props=Object.assign({},a,n.props),e.apply(void 0,[t.TextBlock,i.props].concat(Object(Se.a)(i.binding)))},Xe=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Le({margin:8,stroke:"#fff",font:"bold 16px sans-serif"},n),i={fill:"rgba(0,0,0,0.6)",strokeWidth:1};return a.shape=a.shape||{},a.shape.props=Object.assign({},i,(n.shape||{}).props||{}),a.shape.binding=(n.shape||{}).binding||[],a.adornment=a.adornment||{},a.adornment.props=Object.assign({},(n.adornment||{}).props||{}),a.adornment.binding=(n.adornment||{}).binding||[],a.adornment.type=(n.adornment||{}).type||"Auto",e.apply(void 0,[t.Adornment,a.adornment.type,a.adornment.props,e.apply(void 0,[t.Shape,a.shape.props].concat(Object(Se.a)(a.shape.binding))),e.apply(void 0,[t.TextBlock,a.props].concat(Object(Se.a)(a.binding)))].concat(Object(Se.a)(a.adornment.binding)))},Ye=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Le({},n);return e.apply(void 0,[t.Shape,a.props].concat(Object(Se.a)(a.binding),[a.events]))},Je=function(e,t,n){var a=[];return Object.entries(n).forEach(function(e){var n=[];if("string"==typeof e[1])n.push(e[0],e[1]),a.push(Object(We.a)(t.Binding,n));else{n.push(e[0],e[1].key),e[1].handler&&n.push(e[1].handler);var i=Object(We.a)(t.Binding,n);if(e[1].type&&"string"==typeof e[1].type)a.push(i[e[1].type]());else if(e[1].type&&e[1].type instanceof Array){var r=[];e[1].type[1]&&(e[1].type[1]instanceof Array?e[1].type[1]instanceof Array&&r.push.apply(r,Object(Se.a)(e[1].type[1])):r.push(e[1].type[1])),a.push(i[e[1].type[0]].apply(i,r))}else a.push(i)}}),a};function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ze(e,t,n,a){return{key:"",handler:function(e){var i,r=n.dataKey;return e[r]&&void 0!==e[r][a]?i=e[r][a]:void 0!==n[a]&&(i=n[a]),"margin"===a&&i instanceof Array&&(i=Object(We.a)(t.Margin,Object(Se.a)(i))),i}}}function et(e,t,n,a){return{key:"",handler:function(e,t){var i,r=n.dataKey,o=t.data;return e&&void 0!==e[a]?i=e[a]:o[r]&&void 0!==o[r][a]?i=o[r][a]:void 0!==n[a]&&(i=n[a]),i}}}var tt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({name:"",figure:"RoundedRectangle",background:"#40a9ff",stroke:"#003a8c",strokeWidth:1,strokeDashArray:null,color:"#000",dataKey:"tagData",font:'14px "Microsoft Yahei"',margin:5,show:!0,text:"",placement:"top-right",props:{},events:{}},n);return Fe(e,t,{type:"auto",props:Qe({},a.props,{name:a.name,alignment:new t.Spot(1,0)}),parts:[Ye(e,t,{props:{figure:a.figure,fill:a.background,stroke:a.stroke,strokeWidth:a.strokeWidth,strokeDashArray:a.strokeDashArray},binding:Je(e,t,{figure:Ze(0,t,a,"figure"),fill:Ze(0,t,a,"background"),stroke:Ze(0,t,a,"stroke"),strokeWidth:Ze(0,t,a,"strokeWidth"),strokeDashArray:Ze(0,t,a,"strokeDashArray")})}),Ue(e,t,{props:{text:a.text,margin:a.margin,stroke:a.color,font:a.font},binding:Je(e,t,{margin:{key:"",handler:{key:"",handler:function(e){var n;return"number"==typeof(n=e[a.dataKey]&&void 0!==e[a.dataKey].margin?e[a.dataKey].margin:a.margin)?n:n instanceof Array?Object(We.a)(t.Margin,Object(Se.a)(n)):void 0}}},stroke:Ze(0,t,a,"color"),font:Ze(0,t,a,"font"),text:{key:"",handler:function(e){var t=a.dataKey,n="";return e[t]&&"string"==typeof e[t].text?n=e[t].text:"string"==typeof a.text&&(n=a.text),n}},visible:{key:"",handler:function(e){var t=a.dataKey;return"string"==typeof(e[t]&&"string"==typeof e[t].text?e[t].text:a.text)}}})}),Fe(e,t,{type:"ver",props:{itemTemplate:e(t.Panel,"Auto",{margin:2},e.apply(void 0,[t.TextBlock,{margin:2,stroke:a.color,font:a.font}].concat(Object(Se.a)(Je(e,t,{margin:et(0,0,a,"margin"),stroke:et(0,0,a,"color"),font:et(0,0,a,"font"),background:et(0,0,a,"background"),text:{key:"",handler:function(e){return e.text?e.text:a.text||""}}})))))},binding:Je(e,t,{itemArray:{key:"",handler:function(e){var t=a.dataKey;return e[t]&&e[t].text instanceof Array?e[t].text:[]}},visible:{key:"",handler:function(e){var t,n=a.dataKey;return e[n]&&e[n].text instanceof Array?t=e[n].text:e[n]&&void 0===e[n].text&&a.text&&a.text instanceof Array&&(t=a.text),!!t}}})})],binding:Je(e,t,{name:Ze(0,t,a,"name"),visible:{key:"",handler:function(e){var t=a.dataKey,n=!0;return e[t]&&!1===e[t].show?n=!1:void 0===e[t]&&!1===a.show&&(n=!1),!(!(e[t]&&"string"==typeof e[t].text||e[t]&&e[t].text instanceof Array||void 0===e[t]&&a.text)||!1===n)}},alignment:{key:"",handler:function(e){var n,i=a.dataKey,r=.5,o=.5;return"string"==typeof(n=e[i]&&e[i].placement?e[i].placement:a.placement)?(n.includes("top")?o=0:n.includes("bottom")&&(o=1),n.includes("left")?r=0:n.includes("right")&&(r=1)):n instanceof Array&&(r=n[0],o=n[1]),new t.Spot(r,o)}}}),events:a.events})};n(275);function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var it=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({name:"",figure:"Circle",fill:"#faad14",stroke:"#d48806",strokeWidth:1,strokeDashArray:null,color:"#fff",stateKey:"active",size:15,activeText:{text:"",font:'14px "iconfont"'},inactiveText:{text:"",font:'14px "iconfont"'},placement:"top-right",stateCompute:null,props:{},binding:[],events:{}},n);return a.activeText=Object.assign({text:"",font:'14px "iconfont"'},a.activeText),a.inactiveText=Object.assign({text:"",font:'14px "iconfont"'},a.inactiveText),a.events=Object.assign({click:function(){}},a.events),Fe(e,t,{type:"Auto",parts:[Ye(e,t,{props:at({figure:a.figure,fill:a.fill,width:a.size,height:a.size,stroke:a.stroke,strokeWidth:a.strokeWidth},a.props)}),Ue(e,t,{props:{stroke:a.color},binding:Je(e,t,{text:{type:"ofObject",key:"",handler:function(e){return(a.stateCompute&&"function"==typeof a.stateCompute?a.stateCompute(e):!!e.data[a.stateKey])?a.activeText.text:a.inactiveText.text}},font:{key:"",handler:function(e){return e[a.stateKey]?a.activeText.font:a.inactiveText.font}}})})],binding:[].concat(Object(Se.a)(a.binding),Object(Se.a)(Je(e,t,{alignment:{key:"",handler:function(){var e=a.placement,n=.5,i=.5;return"string"==typeof e?(e.includes("top")?i=0:e.includes("bottom")&&(i=1),e.includes("left")?n=0:e.includes("right")&&(n=1)):e instanceof Array&&(n=e[0],i=e[1]),new t.Spot(n,i)}}}))),events:{click:function(e,t){var n;a.stateCompute&&"function"==typeof a.stateCompute?(n=a.stateCompute(t.part),a.events.click(n,t)):(n=t.part.data[a.stateKey],t.part.data[a.stateKey]=!n,a.events.click(n,t))}}})},rt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({figure:"Circle",size:80,fillType:"Radial",fill:{0:"rgba(0,0,0,0)",.67:"rgba(255,242,0,0.1)",.8:"rgba(255,242,0,0.5)",1:"rgba(255,242,0,1)"},visibleKey:"mark",colorKey:"markFill"},n);return Ye(e,t,{props:{figure:a.figure,width:a.size,height:a.size,stroke:null,fill:e(t.Brush,a.fillType,a.fill)},binding:Je(e,t,{visible:{key:"",handler:function(e){return!!e[a.visibleKey]}},fill:{key:"",handler:function(n){return n[a.colorKey]?e(t.Brush,a.fillType,n[a.colorKey]):e(t.Brush,a.fillType,n[a.fill])}}})})},ot=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Le({selectionAdorned:!1},n),i=0===a.parts.length?[e(t.Shape)]:a.parts;return e.apply(void 0,[t.Link,a.props,a.events].concat(Object(Se.a)(i),Object(Se.a)(a.binding)))},st=1e3/60,lt=Math.pow,ct=Math.sqrt,dt=Math.sin,ut=Math.cos,pt=Math.PI,ft=1.70158,ht=1.525*ft,gt=ft+1,mt=2*pt/3,yt=2*pt/4.5,bt=window.requestAnimationFrame||function(e){setTimeout(e,st)},vt={},kt={},Ot={},jt={spot:["alignment","alignmentFocus","fromSpot","toSpot","verticalAlignment","imageAlignment","locationSpot","rotationSpot"],number:["angle","fromShortLength","height","opacity","scale","segmentFraction","toEndSegmentLength","toShortLength","width","shadowBlur","corner","curviness","smoothness"],size:["desiredSize","maxSize","minSize"],margin:["margin","padding","avoidableMargin"],rect:["sourceRect"],point:["position","segmentOffset","location","maxLocation","minLocation","shadowOffset"],rgba:["areaBackground","background","fill","stroke","shadowColor"]},wt=function(){var e={},t=function(t){jt[t].forEach(function(n){e[n]=t})};for(var n in jt)t(n);return e}();function Nt(e,t,n,a,i,r){var o=t.part;if(o){var s,l,c=o.data.animation||((a||{}).props||{}).animation;if(!c||!(c instanceof Array)||c&&0===c.length)return void(r&&"function"==typeof r&&r(!1));if(!c.some(function(e){return e.trigger===n}))return;s=o.diagram,l=s.skipsUndoManager,s.skipsUndoManager=!0,kt={},Ot={};var d=o instanceof i.Node?"tNode":"sLabel";c.forEach(function(e,t){if(e.trigger===n){var a=o.findObject(e.objectName||d);a&&(a.isAnimated=!1);var c=e.propType||wt[e.prop]||"number";!function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({keyFrame:[0,1],easingFunc:["easeInQuad"],duration:300,animateIndex:0,animationFinish:null,relateObjectId:"",diagram:null,go:null,obj:null,node:null,beforeStart:null,stepCallback:function(){},finishCallback:function(){}},t),a=n.keyFrame[0],i=n.keyFrame[1];n.relateObjectId&&void 0!==kt[n.relateObjectId]&&kt[n.relateObjectId].trigger!==n.trigger&&(a=kt[n.relateObjectId].state,function(e){delete vt[e]}(kt[n.relateObjectId].animationId));var r=0;a instanceof Array?(e=[],a.forEach(function(t,n){e.push(i[n]-t)})):e=i-a;var o=1/(t.duration/st),s=0,l="".concat((new Date).getTime()).concat(Math.floor(1e5*Math.random()));if(vt[l]=function(){var t;if(e instanceof Array)t=[],a.forEach(function(a,i){"function"==typeof n.easingFunc[i]?t.push(a+e[i]*n.easingFunc[i](s)):t.push(a+e[i]*xt[n.easingFunc[i]||"easeInQuad"](s))});else{var c=n.easingFunc?xt[n.easingFunc[0]]||n.easingFunc[0]:"easeInQuad";t=a+e*c(s)}n.relateObjectId&&(kt[n.relateObjectId]={trigger:n.trigger,state:t,animationId:l,prevName:n.prevName,name:n.name}),n.stepCb(t),(s+=o)<1&&vt[l]?bt(vt[l]):bt(function(){n.stepCb(i),r++;var t=!0;if(n.animationFinish&&"function"==typeof n.animationFinish&&(t=n.animationFinish(n.obj,n.node,n.diagram,n.go)),!1!==t)if(n.repeatCount>r){s=0;var o=a instanceof Array?Object(Se.a)(a):a,c=i instanceof Array?Object(Se.a)(i):i;if(a="alternate"===n.direction?c:o,i="alternate"===n.direction?o:c,a instanceof Array){var d=[];a.forEach(function(e,t){d.push(i[t]-a[t])}),e=d}else e=i-a;vt[l]&&vt[l]()}else{if(n.name)if(Ot[n.trigger])if(0===Ot[n.trigger].length)delete Ot[n.trigger];else{var u=Ot[n.trigger].shift(),p=!0;if(u.beforeStart&&"function"==typeof u.beforeStart&&(console.log(n),p=u.beforeStart(n.obj,n.node,n.diagram,n.go)),!1===p)return;u.delay&&u.trigger===n.trigger?setTimeout(function(){u.animation()},u.delay):u.animation()}else n.finishCb();else n.finishCb();delete vt[l],n.relateObjectId&&delete kt[n.relateObjectId]}})},n.prevName)!function(e,t){var n={name:e.name,prevName:e.prevName,trigger:e.trigger,delay:e.delay||0,beforeStart:e.beforeStart,animation:t};if(Ot[e.trigger]){var a=Ot[e.trigger].find(function(t){return t.name===e.prevName}),i=Ot[e.trigger].indexOf(a);i>=0?Ot[e.trigger].splice(i,0,n):Ot[e.trigger].push(n)}else Ot[e.trigger]=[],Ot[e.trigger].push(n)}(n,vt[l]);else{var c=!0;if(n.beforeStart&&"function"==typeof n.beforeStart&&(c=n.beforeStart(n.obj,n.node,n.diagram,n.go)),!1===c)return;n.delay?setTimeout(function(){vt[l]&&vt[l]()},n.delay):vt[l]&&vt[l]()}}({keyFrame:function(e,t,n,a){var i,r;if(t&&n.prop&&(r=t[n.prop]),"relative"===e)switch(a){case"number":i=[r+n.keyFrame[0],r+n.keyFrame[1]];break;case"spot":i=[[r.x+n.keyFrame[0][0],r.y+n.keyFrame[0][1],r.offsetX+n.keyFrame[0][2]||0,r.offsetY+n.keyFrame[0][3]||0],[r.x+n.keyFrame[1][0],r.y+n.keyFrame[1][1],r.offsetX+n.keyFrame[1][2]||0,r.offsetY+n.keyFrame[1][3]||0]];break;case"point":i=[[r.x+n.keyFrame[0][0],r.y+n.keyFrame[0][1]],[r.x+n.keyFrame[1][0],r.y+n.keyFrame[1][1]]];break;case"size":i=[[r.width+n.keyFrame[0][0],r.height+n.keyFrame[0][1]],[r.width+n.keyFrame[1][0],r.height+n.keyFrame[1][1]]];break;case"margin":i=[[r.top+n.keyFrame[0][0],r.right+n.keyFrame[0][1],r.bottom+n.keyFrame[0][2],r.left+n.keyFrame[0][3]],[r.top+n.keyFrame[1][0],r.right+n.keyFrame[1][1],r.bottom+n.keyFrame[1][2],r.left+n.keyFrame[1][3]]];break;case"rect":i=[[r.x+n.keyFrame[0][0],r.y+n.keyFrame[0][1],r.width+n.keyFrame[0][2],r.height+n.keyFrame[0][3]],[r.x+n.keyFrame[1][0],r.y+n.keyFrame[1][1],r.width+n.keyFrame[1][2],r.height+n.keyFrame[1][3]]]}else i=n.keyFrame;return i}(e.keyType,a,e,c),easingFunc:e.easingFunc||["easeInQuad"],duration:e.duration||300,propType:c||"number",delay:e.delay||0,direction:e.direction||"normal",prevName:e.prevName||"",name:e.name||"",diagram:s,obj:a,node:o,go:i,repeatCount:e.repeatCount||1,relateObjectId:(a||{}).__gohashid,animateIndex:t,stepCb:function(t){var n;n=e.stateParser&&"function"==typeof e.stateParser?e.stateParser(t,c,a,o,s,i):function(e,t,n){switch(n){case"number":case"array":return t;case"spot":return Object(We.a)(e.Spot,Object(Se.a)(t));case"point":return Object(We.a)(e.Point,Object(Se.a)(t));case"size":return Object(We.a)(e.Size,Object(Se.a)(t));case"margin":return Object(We.a)(e.Margin,Object(Se.a)(t));case"rect":return Object(We.a)(e.Rect,Object(Se.a)(t));case"rgba":return"rgba(".concat(Math.floor(t[0]),",").concat(Math.floor(t[1]),",").concat(Math.floor(t[2]),",").concat(t[3],")")}}(i,t,c),e.stepCallback&&"function"==typeof e.stepCallback?e.stepCallback(n,c,a,o,s,i):a[e.prop]=n},beforeStart:e.beforeStart,animationFinish:e.animationFinish,finishCb:function(){a&&(a.isAnimated=!0),r&&"function"==typeof r&&r(!0)}})}s.skipsUndoManager=l})}}function _t(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}var xt={ease:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-lt(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-lt(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-lt(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-lt(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-lt(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-lt(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-lt(-2*e+2,5)/2},easeInSine:function(e){return 1-ut(e*pt/2)},easeOutSine:function(e){return dt(e*pt/2)},easeInOutSine:function(e){return-(ut(pt*e)-1)/2},easeInExpo:function(e){return 0===e?0:lt(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-lt(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?lt(2,20*e-10)/2:(2-lt(2,-20*e+10))/2},easeInCirc:function(e){return 1-ct(1-lt(e,2))},easeOutCirc:function(e){return ct(1-lt(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-ct(1-lt(2*e,2)))/2:(ct(1-lt(-2*e+2,2))+1)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-lt(2,10*e-10)*dt((10*e-10.75)*mt)},easeOutElastic:function(e){return 0===e?0:1===e?1:lt(2,-10*e)*dt((10*e-.75)*mt)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-lt(2,20*e-10)*dt((20*e-11.125)*yt)/2:lt(2,-20*e+10)*dt((20*e-11.125)*yt)/2+1},easeInBack:function(e){return gt*e*e*e-ft*e*e},easeOutBack:function(e){return 1+gt*lt(e-1,3)+ft*lt(e-1,2)},easeInOutBack:function(e){return e<.5?lt(2*e,2)*(2*(ht+1)*e-ht)/2:(lt(2*e-2,2)*((ht+1)*(2*e-2)+ht)+2)/2},easeInBounce:function(e){return 1-_t(1-e)},easeOutBounce:_t,easeInOutBounce:function(e){return e<.5?(1-_t(1-2*e))/2:(1+_t(2*e-1))/2}},Dt=function(){function e(t,n){if(Object(T.a)(this,e),!t)throw new Error("diagram对象为必须参数");if(this.diagram=t,!n)throw new Error("gojs库为必须参数");this.go=n,this.customEvents={}}return Object(F.a)(e,[{key:"off",value:function(e,t){var n=this;if(delete this.customEvents[e],"all"===t)this.diagram.nodes.each(function(t){t.data.animation&&0!==t.data.animation.length&&(t.data.animation=t.data.animation.filter(function(t){return t.trigger!==e}))});else if(t instanceof Array||"string"==typeof t||"number"==typeof t||t instanceof this.go.Node||"object"===Object(o.a)(t)){var a;t instanceof Array?a=t:("string"==typeof t||"number"==typeof t||t instanceof this.go.Node||"object"===Object(o.a)(t))&&(a=[t]),a.forEach(function(t){var a;"number"==typeof t||"string"==typeof node?a=n.diagram.model.findNodeDataForKey(t):t instanceof n.go.Node?a=t.data:"object"===Object(o.a)(t)&&(a=t),a.animation&&0!==a.animation.length&&(a.animation=a.animation.filter(function(t){return t.trigger!==e}))})}}},{key:"on",value:function(e,t,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("all"===t){this.customEvents[e]=n;var r=function(t){var i,r;a.off(e,t),(i=r=t.data.animation?t.data.animation:[]).push.apply(i,Object(Se.a)(n)),t.data.animation=r};i?this.diagram.links.each(r):this.diagram.nodes.each(r)}else t instanceof Array&&t.forEach(function(e){var t,i,r;("number"==typeof e||"string"==typeof node?t=a.diagram.model.findNodeDataForKey(e):e instanceof a.go.Node||e instanceof a.go.Link?t=e.data:"object"===Object(o.a)(e)&&(t=e),t)&&((i=r=t.animation?t.animation:[]).push.apply(i,Object(Se.a)(n)),t.animation=r)})}},{key:"emit",value:function(e,t,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("all"===t){var r,s,l=0;s=i?this.diagram.links:this.diagram.nodes,r=s.count,s.each(function(t){var i=[];t.data&&t.data.animation?i=t.data.animation:a.customEvents[e]&&(i=a.customEvents[e]),Nt(0,t,e,{props:{animation:i}},a.go,function(){++l===r&&"function"==typeof n&&n()})})}else if(t instanceof Array||"string"==typeof t||"number"==typeof t||t instanceof this.go.Node||t instanceof this.go.Link||"object"===Object(o.a)(t)){var c;t instanceof Array?c=t:("string"==typeof t||"number"==typeof t||t instanceof this.go.Node||t instanceof this.go.Link||"object"===Object(o.a)(t))&&(c=[t]);var d=c.length,u=0;c.forEach(function(t){var i;if("number"==typeof t||"string"==typeof node?i=a.diagram.model.findNodeDataForKey(t):t instanceof a.go.Node||t instanceof a.go.Link?i=t.data:"object"===Object(o.a)(t)&&(i=t),i){var r=i.animation||a.customEvents[e];Nt(0,i.from&&i.to?a.diagram.findLinksByExample({from:i.from,to:i.to}).first():a.diagram.findNodeForData(i),e,{props:{animation:r}},a.go,function(){++u===d&&"function"==typeof n&&n()})}})}}}]),e}();function St(e,t,n,a){var i,r=e.data,s=t.props;return void 0!==a?i=a.data[n]:void 0!==r[n]&&(i=r[n]),r.isGray?"string"==typeof i||"number"==typeof i?i:"object"===Object(o.a)(i)&&void 0!==i.gray?i.gray:s[n].gray:e.isSelected?"string"==typeof i||"number"==typeof i?i:"object"===Object(o.a)(i)&&void 0!==i.select?i.select:s[n].select:r.isHover?"string"==typeof i||"number"==typeof i?i:"object"===Object(o.a)(i)&&void 0!==i.hover?i.hover:s[n].hover:e.isHighlighted?"string"==typeof i||"number"==typeof i?i:"object"===Object(o.a)(i)&&void 0!==i.highlight?i.highlight:s[n].highlight:"string"==typeof i||"number"==typeof i?i:"object"===Object(o.a)(i)&&void 0!==i.normal?i.normal:s[n].normal}function Lt(e,t,n,a){var i,r=a[0],o=a[1];return r&&o?i=function(e){return e[r]&&e[r][o]?e[r][o]:n.props[r][o]}:r&&(i=function(e){return e[r]?e[r]:n.props[r]}),i}function Ct(e,t,n){return Je(e,t,{curve:{key:"",handler:function(e){var a;return"curve"===(a=e.type?e.type:n.props.type)?t.Link.Bezier:"straight"===a?t.Link.None:"route"===a?t.Link.JumpGap:t.Link.Bezier}},curviness:{key:"",handler:function(e){var t;return"curve"===(t=e.type?e.type:n.props.type)?NaN:"straight"===t?0:"route"===t?20:NaN}},corner:{key:"",handler:function(e){return e.type?e.type:n.props.type,10}},routing:{key:"",handler:function(e){return"route"===(e.type?e.type:n.props.type)?t.Link.AvoidsNodes:t.Link.Normal}},smoothness:{key:"",handler:function(e){return void 0!==e.smoothness?e.smoothness:n.props.smoothness}},opacity:{key:"",handler:function(e){return e.opacity?e.opacity:n.props.opacity}},fromShortLength:{key:"",handler:Lt(0,0,n,["fromShortLength"])},toShortLength:{key:"",handler:Lt(0,0,n,["toShortLength"])}})}function Pt(e,t){t.text=e}function Mt(e,t,n){return Je(e,t,{text:{type:["makeTwoWay",Pt],key:"",handler:function(e){return e.text}},margin:{key:"",handler:function(e,a){var i,r=a.part.data;return void 0!==e.margin?i=e.margin:r.label&&void 0!==r.label.margin?i=r.label.margin:void 0!==n.props.label.margin&&(i=n.props.label.margin),"number"==typeof i?i:i instanceof Array?Object(We.a)(t.Margin,Object(Se.a)(i)):void 0}},editable:{key:"",handler:function(e,t){var a=t.part.data;return void 0!==e.editable?e.editable:a.label&&void 0!==a.label.editable?a.label.editable:n.props.label.editable}},font:{key:"",handler:function(e,t){var a=t.part.data;return void 0!==e.font?e.font:a.label&&void 0!==a.label.font?a.label.font:n.props.label.font}},stroke:{type:"ofObject",key:"",handler:function(e,t){return St(t.part,n,"labelColor",e)}}})}function At(e,t,n){return Je(e,t,{itemArray:{key:"",handler:function(e){return e.label&&e.label instanceof Array?e.label:e.label&&e.label.text&&e.label.text instanceof Array?e.label.text:[]}},visible:{key:"",handler:function(e){return!(!e.label||!(e.label instanceof Array||e.label.text instanceof Array))}}})}function Tt(e,t){"string"==typeof t.label?t.label=e:"object"===Object(o.a)(t.label)&&"string"==typeof t.label.text&&(t.label.text=e)}function Ft(e,t,n){return Je(e,t,{font:{key:"",handler:Lt(0,0,n,["label","font"])},text:{type:["makeTwoWay",Tt],key:"",handler:function(e){return void 0===e.label?"":"string"==typeof e.label?e.label:"object"===Object(o.a)(e.label)&&void 0!==e.label.text&&""!==e.label.text?e.label.text:void 0}},stroke:{type:"ofObject",key:"",handler:function(e){return St(e,n,"labelColor")}},margin:{key:"",handler:function(e){return e.label&&e.label.margin?"number"==typeof e.label.margin?e.label.margin:e.label.margin instanceof Array?Object(We.a)(t.Margin,Object(Se.a)(e.label.margin)):Object(We.a)(t.Margin,Object(Se.a)(n.props.label.margin)):"number"==typeof n.props.label.margin?n.props.label.margin:Object(We.a)(t.Margin,Object(Se.a)(n.props.label.margin))}},visible:{key:"",handler:function(e){return"object"===Object(o.a)(e.label)&&"string"==typeof e.label.text||"string"==typeof e.label}}})}function Et(e,t,n){return Je(e,t,{fill:{type:"ofObject",key:"",handler:function(e){return St(e,n,"labelBackground")}},stroke:{type:"ofObject",key:"",handler:function(e){return St(e,n,"labelStroke")}}})}function It(e,t,n){var a={none:t.Link.None,along:t.Link.OrientAlong,upright:t.Link.OrientUpright,upright45:t.Link.OrientUpright45};return Je(e,t,{visible:{key:"",handler:function(e){return!!(e.label&&(e.label instanceof Array||"string"==typeof e.label||"object"===Object(o.a)(e.label)&&!1!==e.label.show)||e.label&&!1!==n.label.show)}},segmentFraction:{key:"",handler:function(e){var t;return(t=e&&e.label&&e.label.placement?e.label.placement:n.props.label.placement).includes("start")?.1:t.includes("end")?.1:.5}},alignmentFocus:{key:"",handler:function(e){var a,i=[0,0,0,0];return(a=e&&e.label&&e.label.placement?e.label.placement:n.props.label.placement).includes("top")?(i[1]=1,i[3]=5):a.includes("middle")?i[1]=.5:a.includes("bottom")&&(i[1]=0,i[3]=-5),a.includes("start")?i[0]=0:a.includes("end")?i[0]=1:i[0]=.5,Object(We.a)(t.Spot,i)}},segmentIndex:{type:["ofObject"],key:"",handler:function(e){var t,a,i,r=e.data,o=Math.floor((e.pointsCount-1)/2);switch((t=r&&r.label&&r.label.placement?r.label.placement:n.props.label.placement).includes("start")?a="start":t.includes("end")&&(a="end"),a){case"start":i=0;break;case"end":i=-1;break;default:i=o}return i}},segmentOrientation:{key:"",handler:function(e){var i="";return i=e.orient?e.orient:n.props.orient,t.Link[i]?t.Link[i]:["none","along","upright","upright45"].includes(i)?a[i]:void 0}}})}function Rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rt(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function zt(e,t,n){return Fe(e,t,{type:"auto",props:Bt({name:"sLabel",segmentOrientation:t.Link.OrientUpright},n.props._outerPanelOptions.props),parts:[Ye(e,t,{props:Bt({stroke:null},n.props._labelShapeOptions.props),binding:[].concat(Object(Se.a)(Et(e,t,n)),Object(Se.a)(n.props._labelShapeOptions.binding))}),Fe(e,t,{type:"ver",props:Bt({},n.props._innerPanelOptions.props),parts:[Ue(e,t,{props:Bt({stroke:"#000"},n.props._labelTextOptions.props),binding:[].concat(Object(Se.a)(Ft(e,t,n)),Object(Se.a)(n.props._labelTextOptions.binding))}),Fe(e,t,{type:"ver",props:Bt({itemTemplate:Fe(e,t,{type:"auto",parts:[Ue(e,t,{binding:Mt(e,t,n)})]})},n.props._labelArrayOptions.props),parts:Object(Se.a)(n.props._labelArrayOptions.parts),binding:[].concat(Object(Se.a)(At(e,t)),Object(Se.a)(n.props._labelArrayOptions.binding))})].concat(Object(Se.a)(n.props._innerPanelOptions.parts))})].concat(Object(Se.a)(n.props._outerPanelOptions.parts)),binding:[].concat(Object(Se.a)(It(e,t,n)),Object(Se.a)(n.props._outerPanelOptions.binding))})}function $t(e,t,n){return Je(e,t,{geometryString:{type:"ofObject",key:"",handler:function(e){return e.path.geometryString}}})}function Kt(e,t,n){return Je(e,t,{strokeDashArray:{key:"",handler:function(e){var t=e.dashes;return t instanceof Array?t:!0===t?[4,4,4,4]:n.props.dashes}},stroke:{type:"ofObject",key:"",handler:function(e){return St(e,n,"lineColor")}},strokeWidth:{type:"ofObject",key:"",handler:function(e){return St(e,n,"lineWidth")}}})}function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ht(e,t,n){return Ye(e,t,{props:Wt({name:"sLine",strokeDashArray:[4,4,4,4]},n.props._lineOptions.props),binding:Kt(e,t,n)})}function Vt(e,t,n){return Ye(e,t,{props:Wt({name:"sLineHolder",height:"auto",width:"auto",stroke:"rgba(0,0,0,0)",strokeWidth:30,strokeDashArray:null,segmentOffset:new t.Point(0,0),segmentOrientation:t.Link.Normal},n.props._linkHolderOptions.props),parts:Object(Se.a)(n.props._linkHolderOptions.parts),binding:[].concat(Object(Se.a)($t(e,t)),Object(Se.a)(n.props._linkHolderOptions.binding))})}function Ut(e,t,n,a){var i=a.props,r={fill:{type:"ofObject",key:"",handler:function(e){return St(e,a,"arrowFill")}},stroke:{type:"ofObject",key:"",handler:function(e){return St(e,a,"arrowStroke")}},strokeWidth:{type:"ofObject",key:"",handler:function(e){return St(e,a,"arrowStrokeWidth")}}},s={key:"",handler:function(e){var t=e.arrows;return t&&"object"===Object(o.a)(t)&&t[n]&&t[n].type?t[n].type:i.arrows[n].type}};return"from"===n?r.fromArrow=s:"to"===n&&(r.toArrow=s),Je(e,t,r)}function Xt(e,t,n,a){var i=a.props,r={visible:{key:"",handler:function(e){var t=e.arrows;return!(!t||"string"!=typeof t||!t.includes(n))||(t&&"object"===Object(o.a)(t)&&t[n]?void 0===t[n].show:i.arrows[n].show)}},scale:{key:"",handler:function(e){var t=e.arrows;return t&&"object"===Object(o.a)(t)&&t[n]&&t[n].scale?t[n].scale:i.arrows[n].scale}}},s={key:"",handler:function(e){var t=e.arrows;return t&&"object"===Object(o.a)(t)&&t[n]&&t[n].type?t[n].type:i.arrows[n].type}};return"from"===n?r.fromArrow=s:"to"===n&&(r.toArrow=s),Je(e,t,r)}function Yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yt(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yt(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qt(e,t,n){var a=Ye(e,t,{props:Jt({stroke:"transparent",fill:"transparent"},n.props._toArrowOptions.props),binding:Ut(e,t,"to",n)});return e.apply(void 0,[t.Panel,"Spot",{name:"sToArrow",segmentIndex:-1,alignmentFocus:new t.Spot(1,.5),segmentOrientation:t.Link.OrientAlong},a].concat(Object(Se.a)(Xt(e,t,"to",n))))}function Qt(e,t,n){var a=Ye(e,t,{props:Jt({stroke:"transparent",fill:"transparent"},n.props._fromArrowOptions.props),binding:Ut(e,t,"from",n)});return e.apply(void 0,[t.Panel,"Position",{name:"sFromArrow",segmentIndex:0,alignmentFocus:new t.Spot(0,.5),segmentOrientation:t.Link.OrientAlong},a].concat(Object(Se.a)(Xt(e,t,"from",n))))}var Zt=function(e,t){return{arrows:{to:{type:"Standard",scale:1,show:!1},from:{type:"Standard",scale:1,show:!1}},type:"curve",smoothness:.5,fromShortLength:0,toShortLength:0,orient:"none",dashes:!1,opacity:1,lineWidth:{normal:1,hover:2,highlight:2,select:2,gray:1},lineColor:{normal:"#000",highlight:"#66b1ff",hover:"#66b1ff",select:"#66b1ff",gray:"#ccc"},arrowFill:{normal:"#000",highlight:"#000",hover:"#000",select:"#000",gray:"#ccc"},arrowStroke:{normal:"#000",highlight:"#000",hover:"#000",select:"#000",gray:"#ccc"},arrowStrokeWidth:{normal:1,hover:1,highlight:1,select:1,gray:1},labelStroke:{normal:"transparent",hover:"transparent",highlight:"transparent",select:"transparent",gray:"#ccc"},labelColor:{normal:"#000",highlight:"#000",hover:"#000",select:"#000",gray:"#ccc"},labelBackground:{normal:"transparent",highlight:"transparent",hover:"transparent",select:"transparent",gray:"#ccc"},label:{text:"",font:"13px sans-serif",editable:!1,show:!1,margin:[0,10,0,10],placement:"top",offsetX:0,offsetY:0,segment:1},_linkOptions:{props:{},parts:[],binding:[]},_lineOptions:{props:{},parts:[],binding:[]},_toArrowOptions:{props:{},parts:[],binding:[]},_fromArrowOptions:{props:{},parts:[],binding:[]},_labelTextOptions:{props:{},parts:[],binding:[]},_labelArrayOptions:{props:{},parts:[],binding:[]},_outerPanelOptions:{props:{},parts:[],binding:[]},_innerPanelOptions:{props:{},parts:[],binding:[]},_labelShapeOptions:{props:{},parts:[],binding:[]},_linkHolderOptions:{props:{},parts:[],binding:[]}}};function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var nn='data:image/svg+xml;utf8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect x="0" y="0" width="100px" height="100px" fill="gray"></rect></svg>',an=function(e,t){return{layout:"Vertical",opacity:1,shape:"Rectangle",stateShape:"Circle",scale:1,nodeMargin:[10,10,10,10],figureMargin:10,clipShape:"Circle",image:void 0,brokenImage:void 0,crossOrigin:"anonymous",linkPort:"tFigure",labelStroke:{normal:"transparent",highlight:"transparent",hover:"transparent",select:"transparent",gray:"transparent"},labelColor:{normal:"#000",highlight:"#000",hover:"#000",select:"#000",gray:"#ccc"},labelBackground:{normal:"transparent",highlight:"transparent",hover:"transparent",select:"transparent",gray:"#ccc"},label:{text:"",show:!0,editable:!1,font:'14px "Microsoft Yahei"',margin:0},iconColor:{normal:"#1890ff",highlight:"#1890ff",hover:"#1890ff",select:"#1890ff",gray:"#ccc"},shapeParams:{figureShape:{parameter1:NaN,parameter2:NaN,geometryString:void 0},clipShape:{parameter1:NaN,parameter2:NaN,geometryString:void 0},holderShape:{parameter1:NaN,parameter2:NaN,geometryString:void 0},stateShape:{parameter1:NaN,parameter2:NaN,geometryString:void 0},containerShape:{parameter1:NaN,parameter2:NaN,geometryString:void 0}},containerShape:null,containerBackground:{normal:"#85a5ff",highlight:"#85a5ff",hover:"#85a5ff",select:"#85a5ff",gray:"#ccc"},containerStrokeColor:{normal:"#061178",highlight:"#061178",hover:"#061178",select:"#061178",gray:"#ccc"},background:{normal:"#91d5ff",highlight:"#91d5ff",hover:"#91d5ff",select:"#91d5ff",gray:"#ccc"},strokeColor:{normal:"#0050b3",highlight:"#c41d7f",hover:"#c41d7f",select:"#c41d7f",gray:"#ccc"},strokeWidth:{normal:2,highlight:2,hover:2,select:2,gray:2},size:[50,50],icon:{font:'30px "iconfont"',text:""},loc:"0 0",bounds:[0,0,70,90],tooltip:{stroke:"#003a8c",color:"#fff",strokeWidth:1,font:'14px "Microsoft Yahei"',background:"rgba(0,0,0,0.6)",text:""},tag:{placement:"top-right",figure:"RoundedRectangle",background:"#40a9ff",stroke:"#003a8c",strokeWidth:1,strokeDashArray:null,color:"#000",font:'14px "Microsoft Yahei"',margin:5,text:""},animation:null,zOrder:0,_nodeOptions:{props:{},parts:[],binding:[]},_outerPanelOptions:{props:{},parts:[],binding:[]},_innerPanelOptions:{props:{},parts:[],binding:[]},_figurePanelOptions:{props:{},parts:[],binding:[]},_figureHolderOptions:{props:{},parts:[],binding:[]},_stateShapeOptions:{props:{},parts:[],binding:[]},_clipShapeOptions:{props:{},parts:[],binding:[]},_clipPanelOptions:{props:{},parts:[],binding:[]},_pictureOptions:{props:{},binding:[]},_shapeOptions:{props:{},parts:[],binding:[]},_iconOptions:{props:{},parts:[],binding:[]},_labelOuterPanelOptions:{props:{},parts:[],binding:[]},_labelInnerPanelOptions:{props:{},parts:[],binding:[]},_labelShapeOptions:{props:{},parts:[],binding:[]},_labelTextOptions:{props:{},parts:[],binding:[]},_labelArrayOptions:{props:{},parts:[],binding:[]},_tagOuterPanelOptions:{props:{},parts:[],binding:[]},_tagShapeOptions:{props:{},parts:[],binding:[]},_tagInnerPanelOptions:{props:{},parts:[],binding:[]},_tagTextOptions:{props:{},parts:[],binding:[]}}};function rn(e,t,n,a){var i,r=e.data,s=t.props;return void 0!==a?i=a.data[n]:void 0!==r[n]&&(i=r[n]),r.isGray?"string"==typeof i||"number"==typeof i?i:"object"===Object(o.a)(i)&&void 0!==i.gray?i.gray:s[n].gray:e.isSelected?"string"==typeof i||"number"==typeof i?i:"object"===Object(o.a)(i)&&void 0!==i.select?i.select:s[n].select:r.isHover?"string"==typeof i||"number"==typeof i?i:"object"===Object(o.a)(i)&&void 0!==i.hover?i.hover:s[n].hover:e.isHighlighted?"string"==typeof i||"number"==typeof i?i:"object"===Object(o.a)(i)&&void 0!==i.highlight?i.highlight:s[n].highlight:"string"==typeof i||"number"==typeof i?i:"object"===Object(o.a)(i)&&void 0!==i.normal?i.normal:s[n].normal}function on(e,t,n,a){var i,r=a[0],o=a[1];return r&&o?i=function(e){return e[r]&&e[r][o]?e[r][o]:n.props[r][o]}:r&&(i=function(e){return e[r]?e[r]:n.props[r]}),i}function sn(e,t,n){var a={};return n.forEach(function(n){a[n]={key:"",handler:function(a){return a.shapeParams&&a.shapeParams[t]&&void 0!==a.shapeParams[t][n]?a.shapeParams[t][n]:e.props.shapeParams[t][n]}}}),a}function ln(e,t,n){return Je(e,t,{type:{key:"",handler:function(e){return e.layout?t.Panel[e.layout]:t.Panel[n.props.layout]}},margin:{key:"",handler:function(e){return"number"==typeof e.nodeMargin?e.figureMargin:e.nodeMargin instanceof Array?Object(We.a)(t.Margin,Object(Se.a)(e.nodeMargin)):Object(We.a)(t.Margin,Object(Se.a)(n.props.nodeMargin))}}})}function cn(e,t,n){return Je(e,t,{portId:{key:"",handler:function(e){return void 0!==e.linkPort&&"tNode"===e.linkPort||void 0===e.linkPort&&"tNode"===n.props.linkPort?"":"tNode"}},opacity:{key:"",handler:function(e){return e.opacity?e.opacity:n.props.opacity}},location:{type:["makeTwoWay",t.Point.stringify],key:"loc",handler:t.Point.parse},position:{type:["makeTwoWay",function(e,n){return new t.Rect(e.x,e.y,n.bounds.width,n.bounds.height)}],key:"bounds",handler:function(e){return e.position}},scale:{key:"",handler:on(0,0,n,["scale"])},zOrder:{key:"",handler:on(0,0,n,["zOrder"])}})}function dn(e,t,n){return Je(e,t,{fill:{key:"",handler:on(0,0,n,["tooltip","background"])},stroke:{key:"",handler:on(0,0,n,["tooltip","stroke"])},strokeWidth:{key:"",handler:on(0,0,n,["tooltip","strokeWidth"])}})}function un(e,t,n){return Je(e,t,{visible:{key:"",handler:function(e){return!(!e.tooltip||"string"!=typeof e.tooltip)||(!(!e.tooltip||!e.tooltip.text)||!(!n.props.tooltip||!n.props.tooltip.text))}}})}function pn(e,t,n){return Je(e,t,{text:{key:"",handler:function(e){return e.tooltip&&"string"==typeof e.tooltip?e.tooltip:e.tooltip&&e.tooltip.text?e.tooltip.text:n.props.tooltip&&n.props.tooltip.text?n.props.tooltip.text:""}},stroke:{key:"",handler:on(0,0,n,["tooltip","color"])},font:{key:"",handler:on(0,0,n,["tooltip","font"])}})}function fn(e,t,n){return Je(e,t,{visible:{key:"",handler:function(e){return!(!e.tag||!e.tag.text)||!(e.tag&&!e.tag.text)&&!!n.props.tag.text}},alignment:{key:"",handler:function(e){var a,i=.5,r=.5;return"string"==typeof(a=e.tag&&e.tag.placement?e.tag.placement:n.props.tag.placement)?(a.includes("top")?r=0:a.includes("bottom")&&(r=1),a.includes("left")?i=0:a.includes("right")&&(i=1)):a instanceof Array&&(i=a[0],r=a[1]),new t.Spot(i,r)}}})}function hn(e,t,n){return Je(e,t,{fill:{key:"",handler:on(0,0,n,["tag","background"])},figure:{key:"",handler:on(0,0,n,["tag","figure"])},stroke:{key:"",handler:on(0,0,n,["tag","stroke"])},strokeWidth:{key:"",handler:on(0,0,n,["tag","strokeWidth"])},strokeDashArray:{key:"",handler:on(0,0,n,["tag","strokeDashArray"])}})}function gn(e,t,n){return Je(e,t,{visible:{key:"",handler:function(e){return!(void 0===e.tag||"object"===Object(o.a)(e.tag)&&!e.tag.text||"object"===Object(o.a)(e.tag)&&"string"!=typeof e.tag.text)}},text:{key:"",handler:on(0,0,n,["tag","text"])},stroke:{key:"",handler:on(0,0,n,["tag","color"])},font:{key:"",handler:on(0,0,n,["tag","font"])},margin:{key:"",handler:function(e){return e.tag&&e.tag.margin?"number"==typeof e.tag.margin?e.tag.margin:e.tag.margin instanceof Array?Object(We.a)(t.Margin,Object(Se.a)(e.tag.margin)):Object(We.a)(t.Margin,Object(Se.a)(n.props.tag.margin)):"number"==typeof n.props.tag.margin?n.props.tag.margin:Object(We.a)(t.Margin,Object(Se.a)(n.props.tag.margin))}}})}function mn(e,t,n){return Je(e,t,{text:{key:"",handler:function(e){return e.text}},margin:{key:"",handler:function(e,a){var i=a.part.data;return i.tag&&i.tag.margin?"number"==typeof i.tag.margin?i.tag.margin:i.tag.margin instanceof Array?Object(We.a)(t.Margin,Object(Se.a)(i.tag.margin)):Object(We.a)(t.Margin,Object(Se.a)(n.props.tag.margin)):"number"==typeof n.props.tag.margin?n.props.tag.margin:Object(We.a)(t.Margin,Object(Se.a)(n.props.tag.margin))}},font:{key:"",handler:function(e,t){var a=t.part.data;return a.tag&&a.tag.font?a.tag.font:n.props.tag.font}},stroke:{key:"",handler:function(e,t){var a=t.part.data;return a.tag&&a.tag.color?a.tag.color:n.props.tag.color}}})}function yn(e,t,n){return Je(e,t,{itemArray:{key:"",handler:function(e){return e.tag&&e.tag instanceof Array?e.tag:e.tag&&e.tag.text&&e.tag.text instanceof Array?e.tag.text:n.props.tag.text}},visible:{key:"",handler:function(e){return!!(e.tag&&e.tag instanceof Array)||!!(e.tag&&e.tag.text instanceof Array)}}})}function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kn(e,t,n){return Fe(e,t,{type:"auto",props:vn({name:"tTag",portId:"tTag"},n.props._tagOuterPanelOptions.props),parts:[Ye(e,t,{props:vn({figure:"RoundedRectangle"},n.props._tagShapeOptions.props),binding:hn(e,t,n)}),Fe(e,t,{type:"ver",props:vn({},n.props._tagInnerPanelOptions.props),parts:[Ue(e,t,{props:vn({},n.props._tagTextOptions.props),binding:gn(e,t,n)}),Fe(e,t,{type:"ver",props:{itemTemplate:Fe(e,t,{type:"auto",parts:[Ue(e,t,{binding:mn(e,t,n)})]})},binding:yn(e,t,n)})].concat(Object(Se.a)(n.props._tagInnerPanelOptions.parts))})].concat(Object(Se.a)(n.props._tagInnerPanelOptions.parts)),binding:fn(e,t,n)})}function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wn(e,t,n,a){var i;switch(a){case"width":i=0;break;case"height":i=1}return function(e){return"number"==typeof e.size?e.size:e.size instanceof Array?e.size[i]:n.props.size[i]}}function Nn(e,t,n){return Je(e,t,jn({width:{key:"",handler:wn(0,0,n,"width")},height:{key:"",handler:wn(0,0,n,"height")},visible:{key:"",handler:function(e){return null!==e.clipShape&&(void 0!==e.clipShape||null!==n.props.clipShape)&&!!(e.shape&&"clipImage"===e.shape||!e.shape&&"clipImage"===n.props.shape)}}},sn(n,"clipShape",["parameter1","parameter2","geometryString"]),{figure:{key:"",handler:function(e){return e.shapeParams&&e.shapeParams.clipShape&&e.shapeParams.clipShape.geometryString?"None":e.clipShape?e.clipShape:n.props.clipShape}}}))}function _n(e,t,n){return Je(e,t,{isCliping:{key:"",handler:function(e){return!!(e.shape&&"clipImage"===e.shape||!e.shape&&"clipImage"===n.props.shape)}},visible:{key:"",handler:function(e){return!!(e.shape&&["image","clipImage"].includes(e.shape)||!e.shape&&["image","clipImage"].includes(n.props.shape))}},portId:{key:"",handler:function(e){return void 0!==e.linkPort&&"tPicture"===e.linkPort||void 0===e.linkPort&&"tPicture"===n.props.linkPort?"":"tPicture"}}})}function xn(e,t,n){return Je(e,t,{source:{key:"",handler:function(e){return e.image}},errorFunction:{type:"ofObject",key:"",handler:function(e){return function(t,a){var i=e.data.brokenImage||n.props.brokenImage;if(i){var r=new Image;r.src=i,r.onload=function(){t.source=i},r.onerror=function(){t.source=nn}}else t.source=nn}}},sourceCrossOrigin:{key:"",handler:function(e){var t="anonymous";return"string"==typeof(t=void 0!==Object(o.a)(e.crossOrigin)?e.crossOrigin:n.props.crossOrigin)?function(e){return t}:null}},width:{key:"",handler:wn(0,0,n,"width")},height:{key:"",handler:wn(0,0,n,"height")}})}function Dn(e,t,n){return Je(e,t,{visible:{key:"",handler:function(e){return null!==e.shape&&(void 0!==e.shape||null!==n.props.shape)}},portId:{key:"",handler:function(e){return void 0!==e.linkPort&&"tFigure"===e.linkPort||void 0===e.linkPort&&"tFigure"===n.props.linkPort?"":"tFigure"}},margin:{key:"",handler:function(e){return"number"==typeof e.figureMargin?e.figureMargin:e.figureMargin instanceof Array?Object(We.a)(t.Margin,Object(Se.a)(e.figureMargin)):n.props.figureMargin}}})}function Sn(e,t,n){return Je(e,t,jn({visible:{key:"",handler:function(e){return null!==e.stateShape&&(void 0!==e.stateShape||null!==n.props.stateShape)}},width:{key:"",handler:wn(0,0,n,"width")},height:{key:"",handler:wn(0,0,n,"height")},stroke:{type:"ofObject",key:"",handler:function(e){return rn(e,n,"strokeColor")}},strokeWidth:{type:"ofObject",key:"",handler:function(e){return rn(e,n,"strokeWidth")}},fill:{type:"ofObject",key:"",handler:function(e){return rn(e,n,"background")}}},sn(n,"stateShape",["parameter1","parameter2","geometryString"]),{figure:{key:"",handler:function(e){return e.shapeParams&&e.shapeParams.stateShape&&e.shapeParams.stateShape.geometryString?"None":e.stateShape?e.stateShape:n.props.stateShape}},portId:{key:"",handler:function(e){return void 0!==e.linkPort&&"tState"===e.linkPort||void 0===e.linkPort&&"tState"===n.props.linkPort?"":"tState"}}}))}function Ln(e,t,n){return Je(e,t,jn({visible:{key:"",handler:function(e){return!!(e.shape&&["clipImage","image"].includes(e.shape)||!e.shape&&["image","clipImage"].includes(n.props.shape))}},width:{key:"",handler:wn(0,0,n,"width")},height:{key:"",handler:wn(0,0,n,"height")}},sn(n,"figureShape",["parameter1","parameter2","geometryString"]),{figure:{key:"",handler:function(e){return e.shapeParams&&e.shapeParams.holderShape&&e.shapeParams.holderShape.geometryString?"None":e.clipShape?e.clipShape:n.props.clipShape}},fill:{key:"",handler:function(e){return e.isGray?e.background&&e.background.gray?e.background.gray:n.props.background.gray:"transparent"}},opacity:{key:"",handler:function(e){return e.isGray?.7:0}},portId:{key:"",handler:function(e){return void 0!==e.linkPort&&"tHolder"===e.linkPort||void 0===e.linkPort&&"tHolder"===n.props.linkPort?"":"tHolder"}}}))}function Cn(e,t,n){return Je(e,t,jn({visible:{key:"",handler:function(e){return!(e.shape&&["clipImage","image","icon"].includes(e.shape)||!e.shape&&["clipImage","image","icon"].includes(n.props.shape))}},fill:{type:"ofObject",key:"",handler:function(e){return rn(e,n,"background")}},stroke:{type:"ofObject",key:"",handler:function(e){return rn(e,n,"strokeColor")}},strokeWidth:{type:"ofObject",key:"",handler:function(e){return rn(e,n,"strokeWidth")}},width:{key:"",handler:wn(0,0,n,"width")},height:{key:"",handler:wn(0,0,n,"height")}},sn(n,"figureShape",["parameter1","parameter2","geometryString"]),{figure:{key:"",handler:function(e){return e.shapeParams&&e.shapeParams.figureShape&&e.shapeParams.figureShape.geometryString?"None":e.shape&&!["clipImage","image","icon"].includes(e.shape)?e.shape:e.shape||["clipImage","image","icon"].includes(n.props.shape)?void 0:n.props.shape}},portId:{key:"",handler:function(e){return void 0!==e.linkPort&&"tShape"===e.linkPort||void 0===e.linkPort&&"tShape"===n.props.linkPort?"":"tShape"}}}))}function Pn(e,t,n){return Je(e,t,{visible:{key:"",handler:function(e){return!!(e.shape&&"icon"===e.shape||!e.shape&&"icon"===n.props.shape)}},text:{key:"",handler:function(e){return e.icon&&"string"==typeof e.icon?e.icon:e.icon&&e.icon.text?e.icon.text:n.props.icon.text}},font:{key:"",handler:on(0,0,n,["icon","font"])},stroke:{type:"ofObject",key:"",handler:function(e){return rn(e,n,"iconColor")}},portId:{key:"",handler:function(e){return void 0!==e.linkPort&&"tIcon"===e.linkPort||void 0===e.linkPort&&"tIcon"===n.props.linkPort?"":"tIcon"}}})}function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Tn(e,t,n){return Fe(e,t,{type:"spot",props:An({name:"tFigure",portId:"tFigure"},n.props._figurePanelOptions.props),parts:[Ye(e,t,{props:An({name:"tState",portId:"tState",figure:"Circle",background:"transparent"},n.props._stateShapeOptions.props),parts:Object(Se.a)(n.props._stateShapeOptions.parts),binding:[].concat(Object(Se.a)(Sn(e,t,n)),Object(Se.a)(n.props._stateShapeOptions.binding))}),Ge(e,t,{clip:{props:An({},n.props._clipShapeOptions.props),binding:[].concat(Object(Se.a)(Nn(e,t,n)),Object(Se.a)(n.props._clipShapeOptions.binding))},panel:{props:An({name:"tPicture",portId:"tPicture"},n.props._clipPanelOptions.props),binding:[].concat(Object(Se.a)(_n(e,t,n)),Object(Se.a)(n.props._clipPanelOptions.binding))},props:An({},n.props._pictureOptions.props),binding:[].concat(Object(Se.a)(xn(e,t,n)),Object(Se.a)(n.props._pictureOptions.binding))}),Ye(e,t,{props:An({name:"tHolder",portId:"tHolder",fill:"red",stroke:"transparent"},n.props._figureHolderOptions.props),parts:Object(Se.a)(n.props._figureHolderOptions.parts),binding:[].concat(Object(Se.a)(Ln(e,t,n)),Object(Se.a)(n.props._figureHolderOptions.binding))}),Ye(e,t,{props:An({name:"tShape",portId:"tShape",fill:"#000"},n.props._shapeOptions.props),binding:[].concat(Object(Se.a)(Cn(e,t,n)),Object(Se.a)(n.props._shapeOptions.binding)),parts:Object(Se.a)(n.props._shapeOptions.parts)}),Ie(e,t,{props:An({name:"tIcon",portId:"tIcon"},n.props._iconOptions.props),binding:[].concat(Object(Se.a)(Pn(e,t,n)),Object(Se.a)(n.props._iconOptions.binding)),parts:Object(Se.a)(n.props._iconOptions.parts)}),kn(e,t,n),Ye(e,t,{props:{name:"tLocPoint",portId:"tLocPoint",width:1,height:1,fill:"transparent",stroke:null}})].concat(Object(Se.a)(n.props._figurePanelOptions.parts)),binding:[].concat(Object(Se.a)(Dn(e,t,n)),Object(Se.a)(n.props._figurePanelOptions.binding))})}function Fn(e,t){t.text=e}function En(e,t,n){return Je(e,t,{text:{type:["makeTwoWay",Fn],key:"",handler:function(e){return e.text}},margin:{key:"",handler:function(e,a){var i,r=a.part.data;return void 0!==e.margin?i=e.margin:r.label&&void 0!==r.label.margin?i=r.label.margin:void 0!==n.props.label.margin&&(i=n.props.label.margin),"number"==typeof i?i:i instanceof Array?Object(We.a)(t.Margin,Object(Se.a)(i)):void 0}},editable:{key:"",handler:function(e,t){var a=t.part.data;return void 0!==e.editable?e.editable:a.label&&void 0!==a.label.editable?a.label.editable:n.props.label.editable}},font:{key:"",handler:function(e,t){var a=t.part.data;return void 0!==e.font?e.font:a.label&&void 0!==a.label.font?a.label.font:n.props.label.font}},stroke:{type:"ofObject",key:"",handler:function(e,t){return rn(t.part,n,"labelColor",e)}}})}function In(e,t,n){return Je(e,t,{itemArray:{key:"",handler:function(e){return e.label&&e.label instanceof Array?e.label:e.label&&e.label.text&&e.label.text instanceof Array?e.label.text:[]}},visible:{key:"",handler:function(e){return!(!e.label||!(e.label instanceof Array||e.label.text instanceof Array))}}})}function Rn(e,t){"string"==typeof t.label?t.label=e:"object"===Object(o.a)(t.label)&&"string"==typeof t.label.text&&(t.label.text=e)}function Bn(e,t,n){return Je(e,t,{text:{type:["makeTwoWay",Rn],key:"",handler:function(e){return void 0===e.label?"":"string"==typeof e.label?e.label:"object"===Object(o.a)(e.label)&&void 0!==e.label.text&&""!==e.label.text?e.label.text:void 0}},visible:{key:"",handler:function(e){return"object"===Object(o.a)(e.label)&&"string"==typeof e.label.text||"string"==typeof e.label}},font:{key:"",handler:on(0,0,n,["label","font"])},stroke:{type:"ofObject",key:"",handler:function(e){return rn(e,n,"labelColor")}},editable:{key:"",handler:on(0,0,n,["label","editable"])},margin:{key:"",handler:function(e){return e.label&&e.label.margin?"number"==typeof e.label.margin?e.label.margin:e.label.margin instanceof Array?Object(We.a)(t.Margin,Object(Se.a)(e.label.margin)):Object(We.a)(t.Margin,Object(Se.a)(n.props.label.margin)):"number"==typeof n.props.label.margin?n.props.label.margin:Object(We.a)(t.Margin,Object(Se.a)(n.props.label.margin))}}})}function zn(e,t,n){return Je(e,t,{fill:{type:"ofObject",key:"",handler:function(e){return rn(e,n,"labelBackground")}},stroke:{type:"ofObject",key:"",handler:function(e){return rn(e,n,"labelStroke")}}})}function $n(e,t,n){return Je(e,t,{visible:{key:"",handler:function(e){return!!(e.label&&(e.label instanceof Array||"string"==typeof e.label||"object"===Object(o.a)(e.label)&&!1!==e.label.show)||e.label&&!1!==n.label.show)}},portId:{key:"",handler:function(e){return void 0!==e.linkPort&&"tLabel"===e.linkPort||void 0===e.linkPort&&"tLabel"===n.props.linkPort?"":"tLabel"}}})}function Kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kn(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Wn(e,t,n){return Fe(e,t,{type:"auto",props:Gn({name:"tLabel",portId:"tLabel"},n.props._labelOuterPanelOptions.props),parts:[Ye(e,t,{props:Gn({figure:"Rectangle"},n.props._labelShapeOptions.props),binding:[].concat(Object(Se.a)(zn(e,t,n)),Object(Se.a)(n.props._labelShapeOptions.binding))}),Fe(e,t,{type:"ver",props:Gn({},n.props._labelInnerPanelOptions.props),parts:[Ue(e,t,{props:Gn({},n.props._labelTextOptions.props),binding:[].concat(Object(Se.a)(Bn(e,t,n)),Object(Se.a)(n.props._labelTextOptions.binding))}),Fe(e,t,{type:"ver",props:Gn({itemTemplate:Fe(e,t,{type:"auto",parts:[Ue(e,t,{binding:En(e,t,n)})]})},n.props._labelArrayOptions.props),binding:[].concat(Object(Se.a)(In(e,t)),Object(Se.a)(n.props._labelArrayOptions.binding))})].concat(Object(Se.a)(n.props._labelInnerPanelOptions.parts)),binding:Object(Se.a)(n.props._labelInnerPanelOptions.binding)})].concat(Object(Se.a)(n.props._labelOuterPanelOptions.parts)),binding:[].concat(Object(Se.a)($n(e,t,n)),Object(Se.a)(n.props._labelOuterPanelOptions.binding))})}function Hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Vn(e,t,n){return Je(e,t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hn(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({visible:{key:"",handler:function(e){return null!==e.containerShape&&(void 0!==e.containerShape||null!==n.props.containerShape)}}},sn(n,"containerShape",["parameter1","parameter2","geometryString"]),{figure:{key:"",handler:function(e){return e.shapeParams&&e.shapeParams.containerShape&&e.shapeParams.containerShape.geometryString?"None":e.containerShape?e.containerShape:n.props.containerShape}},stroke:{type:"ofObject",key:"",handler:function(e){return rn(e,n,"containerStrokeColor")}},fill:{type:"ofObject",key:"",handler:function(e){return rn(e,n,"containerBackground")}}}))}function Un(e,t,n){return Ye(e,t,{props:{},binding:Vn(e,t,n)})}function Xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xn(n,!0).forEach(function(t){Object(j.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xn(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Jn(e,t,n,a){var i,r=a[0],o=a[1];return r&&o?i=function(e){return e[r]&&e[r][o]?e[r][o]:n.props[r][o]}:r&&(i=function(e){return e[r]?e[r]:n.props[r]}),i}function qn(e,t,n){return Je(e,t,{figure:{key:"",handler:Jn(0,0,n,["figure"])},fill:{key:"",handler:Jn(0,0,n,["background"])},stroke:{key:"",handler:Jn(0,0,n,["stroke"])},strokeWidth:{key:"",handler:Jn(0,0,n,["strokeWidth"])},maxSize:{key:"",handler:function(e){return e.maxSize&&e.maxSize instanceof Array?Object(We.a)(t.Size,Object(Se.a)(e.maxSize)):Object(We.a)(t.Size,Object(Se.a)(n.props.maxSize))}}})}function Qn(e,t,n){return Je(e,t,{text:{key:"",handler:Jn(0,0,n,["groupName","text"])},stroke:{key:"",handler:Jn(0,0,n,["groupName","stroke"])},margin:{key:"",handler:function(e,a){var i=a.part.data;return i.groupName&&i.groupName.margin?"number"==typeof i.groupName.margin?i.groupName.margin:i.groupName.margin instanceof Array?Object(We.a)(t.Margin,Object(Se.a)(i.groupName.margin)):Object(We.a)(t.Margin,Object(Se.a)(n.props.groupName.margin)):"number"==typeof n.props.groupName.margin?n.props.groupName.margin:Object(We.a)(t.Margin,Object(Se.a)(n.props.groupName.margin))}}})}var Zn=function(e,t){return{figure:"CustomCircle",background:"rgba(248,91,99,0.1)",stroke:"rgba(248,91,99,0.8)",strokeWidth:1,maxSize:[1e3,1e3],groupName:{text:"",font:'14px "Microsoft Yahei"',margin:[10,10,10,10]}}};var ea=new go.Spot(0,0),ta=new go.Spot(1,1);var na={registerCustomCircle:function(e){e.Shape.defineFigureGenerator("CustomCircle",function(t,n,a){var i=new e.Geometry(e.Geometry.Ellipse);return i.startX=0,i.startY=0,i.endX=n,i.endY=a,i.spot1=ea,i.spot2=ta,i.defaultStretch=e.GraphObject.Uniform,i})}};var aa=function(){function e(t,n,a){Object(T.a)(this,e),this.diagram=t,this.go=n,this.nodeExist={},this.linkExist={},this.nodeConverter={},this.linkConverter={},this.nodeMergeFun={},this.linkMergeFun={},this.updateNodeFun={},this.updateLinkFun={}}return Object(F.a)(e,[{key:"getNode",value:function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"==typeof e||"number"==typeof e?t=e:e instanceof this.go.Node?t=e.key:"object"===Object(o.a)(e)&&void 0!==e.key&&(t=e.key),"object"===Object(o.a)(e)&&i){var r=this.diagram.findNodesByExample(e),s=[];return r.each(function(e){a?s.push(e):s.push(e.data)}),s}if(n=this.diagram.findNodeForKey(t))return a?n:n.data}},{key:"getLink",value:function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"==typeof e||"number"==typeof e){var i=this.diagram.model.linkDataArray.find(function(t){return t.key===e});i&&(n=this.diagram.findLinkForData(i))}else if(e instanceof this.go.Link)n=e;else if("object"===Object(o.a)(e)&&void 0!==e.key&&!a){var r=this.diagram.model.linkDataArray.find(function(t){return t===e});r&&(n=this.diagram.findLinkForData(r))}if(n)return t?n:n.data;if("object"===Object(o.a)(e)&&a){var s=this.diagram.findLinksByExample(e),l=[];return s.each(function(e){t?l.push(e):l.push(e.data)}),l}}},{key:"setNodeConverter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};this.nodeConverter[e]=t,this.nodeMergeFun[e]=n}},{key:"setLinkConverter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};this.linkConverter[e]=t,this.linkMergeFun[e]=n}},{key:"addNode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({distinct:!0,duplicate:"replace",mergeFun:""},n),i=this.nodeConverter[t](e,a);if(i._originData=e,void 0===i.key)throw new Error("节点数据必须定义key");var r=!!this.nodeExist[i.key];if(r)if(a.distinct){if("replace"===a.duplicate){var o=this.diagram.model.findNodeDataForKey(i.key);for(var s in i)"key"!==s&&this.diagram.model.set(o,s,i[s])}else if("merge"===a.duplicate){var l;if(!(l=a.mergeFun?this.nodeMergeFun[a.mergeFun]:this.nodeMergeFun[t]))throw new Error("mergeFun数据合并方法未定义");var c=l(this.nodeExist[i.key],i,this.go,this.diagram);if(c){var d=this.diagram.model.findNodeDataForKey(c.key);for(var u in c)"key"!==u&&this.diagram.model.set(d,u,c[u])}}}else this.diagram.model.addNodeData(i);else this.diagram.model.addNodeData(i),this.nodeExist[i.key]=i}},{key:"addLink",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({distinct:!0,duplicate:"replace",mergeFun:""},n),i=this.linkConverter[t](e,a);i._originData=e;var r,o=i.key||i.from+"_"+i.to,s=!1;for(var l in i.key&&this.linkExist[o]&&(s=!0),this.linkExist){var c=this.linkExist[l];if(c.from===i.from&&c.to===i.to){r=c,s=!0;break}}if(s)if(a.distinct){if("replace"===a.duplicate)for(var d in i)"key"!==d&&this.diagram.model.set(r,d,i[d]);else if("merge"===a.duplicate){var u;if(!(u=a.mergeFun?this.linkMergeFun[a.mergeFun]:this.linkMergeFun[t]))throw new Error("mergeFun数据合并方法未定义");var p=u(r,i,this.go,this.diagram);if(p)for(var f in p)"key"!==f&&this.diagram.model.set(r,f,p[f])}}else this.diagram.model.addLinkData(i);else this.diagram.model.addLinkData(i),this.linkExist[o]=i}},{key:"removeNode",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.getNode(e,!0,n);a instanceof Array?a.forEach(function(e){t.diagram.remove(e)}):this.diagram.remove(a)}},{key:"removeLink",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.getLink(e,!0,n);a instanceof Array?a.forEach(function(e){t.diagram.remove(e)}):this.diagram.remove(a)}},{key:"setNodeUpdater",value:function(e,t){this.updateNodeFun[e]=t}},{key:"setLinkUpdater",value:function(e,t){this.updateLinkFun[e]=t}},{key:"updateNode",value:function(e,t,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.getNode(e,!1,r);o instanceof Array?i?o.forEach(function(e){e._originData[t]=n,a.updateNodeFun[t](e,n,a.diagram.model,a.diagram)}):o.forEach(function(e){a.diagram.model.set(e,t,n)}):i?(o._originData[t]=n,this.updateNodeFun[t](o,n,this.diagram.model,this.diagram)):this.diagram.model.set(o,t,n)}},{key:"updateLink",value:function(e,t,n){var a=this,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=this.getLink(e,!1,r);o instanceof Array?i?o.forEach(function(e){e._originData[t]=n,a.updateLinkFun[t](e,n,a.diagram.model,a.diagram)}):o.forEach(function(e){a.diagram.model.set(e,t,n)}):i?(o._originData[t]=n,this.updateLinkFun[t](o,n,this.diagram.model,this.diagram)):this.diagram.model.set(o,t,n)}},{key:"clear",value:function(){this.nodeExist={},this.linkExist={},this.diagram.clear()}}]),e}();n(152),n(369);n.d(t,"a",function(){return oa}),n.d(t,"d",function(){return sa}),n.d(t,"k",function(){return la}),n.d(t,"b",function(){return ca}),n.d(t,"f",function(){return da}),n.d(t,"i",function(){return ua}),n.d(t,"c",function(){return pa}),n.d(t,"j",function(){return fa}),n.d(t,"e",function(){return ha}),n.d(t,"l",function(){return ga}),n.d(t,"h",function(){return ma}),n.d(t,"g",function(){return ya}),n.d(t,"u",function(){return ba}),n.d(t,"t",function(){return va}),n.d(t,"s",function(){return ka}),n.d(t,"q",function(){return Oa}),n.d(t,"n",function(){return ja}),n.d(t,"p",function(){return wa}),n.d(t,"o",function(){return Na}),n.d(t,"r",function(){return _a}),console.log("go",r.a);var ia=[h,b,O,D,C,A,J,te,me,ke,Ne,De],ra=function e(t){e.installed||ia.forEach(function(e){return t.component(e.name,e)})};"undefined"!=typeof window&&window.Vue&&ra(window.Vue);var oa=h,sa=b,la=O,ca=D,da=C,ua=A,pa=J,fa=te,ha=me,ga=ke,ma=Ne,ya=De,ba=a,va=function(e,t,n){var a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=an(e,t),i=Object.assign({props:{},parts:[],events:{},binding:[]},n),r=["label","labelStroke","labelColor","labelBackground","containerBackground","containerStrokeColor","iconColor","background","strokeColor","strokeWidth","container","tooltip","icon","size","shapeParams","animation"];for(var s in a)if(r.includes(s))if("object"!==Object(o.a)(i.props[s]))if(["label","icon","tooltip"].includes(s)){var l={};for(var c in a[s])l[c]="text"===c&&i.props[s]||a[s][c];i.props[s]=l}else if("size"===s)"number"==typeof i.props.size?i.props.size=[i.props.size,i.props.size]:i.props.size instanceof Array||(i.props.size=a.size);else if("animation"===s)i.props.animation=i.props.animation||a.animation;else{var d={};for(var u in a[s])d[u]=i.props[s]||a[s][u];i.props[s]=d}else for(var p in a[s])i.props[s][p]=void 0===i.props[s][p]?a[s][p]:i.props[s][p];else"_"===s[0]&&i.props[s]?(i.props[s].props=void 0===i.props[s].props?a[s].props:i.props[s].props,i.props[s].parts=void 0===i.props[s].parts?a[s].parts:i.props[s].parts,i.props[s].binding=void 0===i.props[s].binding?a[s].binding:i.props[s].binding):i.props[s]=void 0===i.props[s]?a[s]:i.props[s];return i}(e,t,n),i=function(e){var t=[],n=[];return e.parts&&e.parts instanceof Array?t=Object(Se.a)(e.parts):e.parts&&(e.parts.up||e.parts.down)&&(t=Object(Se.a)(e.parts.up||[]),n=Object(Se.a)(e.parts.down||[])),{extendUp:t,extendDown:n}}(a),r=i.extendUp,s=i.extendDown;return function(e,t,n){if(e.events.mouseEnter){var a=e.events.mouseEnter;e.events.mouseEnter=function(t,i){i.diagram&&i.diagram.model&&i.diagram.model.set(i.data,"isHover",!0),Nt(0,i,"mouseEnter",e,n),a(t,i)}}else e.events.mouseEnter=function(t,a){a.diagram&&a.diagram.model&&a.diagram.model.set(a.data,"isHover",!0),Nt(0,a,"mouseEnter",e,n)};if(e.events.mouseLeave){var i=e.events.mouseLeave;e.events.mouseLeave=function(t,a){a.diagram&&a.diagram.model&&a.diagram.model.set(a.data,"isHover",!1),Nt(0,a,"mouseLeave",e,n),i(t,a)}}else e.events.mouseLeave=function(t,a){a.diagram&&a.diagram.model&&a.diagram.model.set(a.data,"isHover",!1),Nt(0,a,"mouseLeave",e,n)};if(e.events.click){var r=e.events.click;e.events.click=function(t,a){Nt(0,a,"click",e,n),r(t,a)}}else e.events.click=function(t,a){Nt(0,a,"click",e,n)};if(e.events.doubleClick){var o=e.events.doubleClick;e.events.doubleClick=function(t,a){Nt(0,a,"dbclick",e,n),o(t,a)}}else e.events.doubleClick=function(t,a){Nt(0,a,"dbclick",e,n)}}(a,0,t),Be(e,t,{props:Yn({name:"tNode",portId:"tNode",locationObjectName:"tLocPoint",shadowVisible:!0,toolTip:Xe(e,t,{shape:{binding:dn(e,t,a)},adornment:{binding:un(e,t,a)},binding:pn(e,t,a)})},a.props._nodeOptions.props),binding:[].concat(Object(Se.a)(cn(e,t,a)),Object(Se.a)(a.binding||[])),parts:[Fe(e,t,{type:"auto",props:Yn({},a.props._outerPanelOptions.props),parts:[Un(e,t,a)].concat(Object(Se.a)(s),[Fe(e,t,{type:"ver",props:Yn({},a.props._innerPanelOptions.props),parts:[Tn(e,t,a),Wn(e,t,a)].concat(Object(Se.a)(a.props._innerPanelOptions.parts)),binding:[].concat(Object(Se.a)(ln(e,t,a)),Object(Se.a)(a.props._innerPanelOptions.binding))})],Object(Se.a)(r),Object(Se.a)(a.props._outerPanelOptions.parts)),binding:Object(Se.a)(a.props._outerPanelOptions.binding)})].concat(Object(Se.a)(a.props._nodeOptions.parts)),events:a.events||{}})},ka=function(e,t,n){var a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Zt(e,t),i=Object.assign({props:{},parts:[],events:{},binding:[]},n),r=["label","labelStroke","labelBackground","lineColor","lineWidth","arrowFill","arrowStrokeWidth","arrowStroke","arrows"],s=function(e){if(r.includes(e))if("arrows"===e){var t=Object(o.a)(i.props[e]),n={to:{},from:{}};["to","from"].forEach(function(r){for(var o in a[e][r])if("show"===o)switch(t){case"string":n[r].show=i.props[e].includes(r);break;case"undefined":n[r].show=!1;break;case"object":void 0!==i.props[e][r]?void 0===i.props[e][r].show?n[r].show=!0:n[r].show=i.props[e][r].show:n[r].show=!1}else n[r][o]=a[e][r][o]}),i.props.arrows=n}else if("object"!==Object(o.a)(i.props[e]))if(["label"].includes(e)){var s={};for(var l in a[e])s[l]="text"===l&&i.props[e]||a[e][l];i.props[e]=s}else{var c={};for(var d in a[e])c[d]=i.props[e]||a[e][d];i.props[e]=c}else for(var u in a[e])i.props[e][u]=void 0===i.props[e][u]?a[e][u]:i.props[e][u];else"_"===e[0]&&i.props[e]?(i.props[e].props=void 0===i.props[e].props?a[e].props:i.props[e].props,i.props[e].parts=void 0===i.props[e].parts?a[e].parts:i.props[e].parts,i.props[e].binding=void 0===i.props[e].binding?a[e].binding:i.props[e].binding):i.props[e]=void 0===i.props[e]?a[e]:i.props[e]};for(var l in a)s(l);return i}(e,t,n),i=function(e){var t=[],n=[];return e.parts&&e.parts instanceof Array?t=Object(Se.a)(e.parts):e.parts&&e.parts.up&&(t=Object(Se.a)(e.parts.up),n=Object(Se.a)(e.parts.down||[])),{extendUp:t,extendDown:n}}(a),r=i.extendUp,s=i.extendDown;return function(e,t,n){if(e.events.mouseEnter){var a=e.events.mouseEnter;e.events.mouseEnter=function(t,i){i.diagram.model.set(i.data,"isHover",!0),Nt(0,i,"mouseEnter",e,n),a(t,i)}}else e.events.mouseEnter=function(t,a){a.diagram.model.set(a.data,"isHover",!0),Nt(0,a,"mouseEnter",e,n)};if(e.events.mouseLeave){var i=e.events.mouseLeave;e.events.mouseLeave=function(t,a){a.diagram.model.set(a.data,"isHover",!1),Nt(0,a,"mouseLeave",e,n),i(t,a)}}else e.events.mouseLeave=function(t,a){a.diagram.model.set(a.data,"isHover",!1),Nt(0,a,"mouseLeave",e,n)};if(e.events.click){var r=e.events.click;e.events.click=function(t,a){Nt(0,a,"click",e,n),r(t,a)}}else e.events.click=function(t,a){Nt(0,a,"click",e,n)};if(e.events.doubleClick){var o=e.events.doubleClick;e.events.doubleClick=function(t,a){Nt(0,a,"dbclick",e,n),o(t,a)}}else e.events.doubleClick=function(t,a){Nt(0,a,"dbclick",e,n)}}(a,0,t),ot(e,t,{props:tn({name:"sLinkNode",zOrder:-1},a.props._linkOptions.props),parts:[Ht(e,t,a)].concat(Object(Se.a)(s),[qt(e,t,a),Qt(e,t,a),zt(e,t,a),Vt(e,t,a)],Object(Se.a)(r),Object(Se.a)(a.props._linkOptions.parts)),binding:[].concat(Object(Se.a)(Ct(e,t,a)),Object(Se.a)(a.binding)),events:a.events})},Oa=function(e,t,n){var a=function(e,t,n){var a=Zn(e,t),i=Object.assign({props:{},parts:[],events:{},binding:[]},n),r=["groupName"];for(var s in a)if(r.includes(s))if("object"!==Object(o.a)(i.props[s])){if(["groupName"].includes(s)){var l={};for(var c in a[s])l[c]="text"===c&&i.props[s]||a[s][c];i.props[s]=l}}else for(var d in a[s])i.props[s][d]=void 0===i.props[s][d]?a[s][d]:i.props[s][d];else"_"===s[0]&&i.props[s]?(i.props[s].props=void 0===i.props[s].props?a[s].props:i.props[s].props,i.props[s].parts=void 0===i.props[s].parts?a[s].parts:i.props[s].parts,i.props[s].binding=void 0===i.props[s].binding?a[s].binding:i.props[s].binding):i.props[s]=void 0===i.props[s]?a[s]:i.props[s];return i}(e,t,n);return a.props.groupType=a.props.groupType||"normal",function(e,t){na["register"+t](e)}(t,"CustomCircle"),"mixed"===a.props.groupType?function(e,t,n){return Be(e,t,{type:"Vertical",props:{locationObjectName:"BODY",selectionAdorned:!1,zOrder:1},parts:[Fe(e,t,{type:"Auto",props:{margin:10},parts:[Ye(e,t,{props:{},binding:qn(e,t,n)}),Ue(e,t,{props:{font:"bold 18px sans-serif",isMultiline:!0,editable:!0,alignment:new t.Spot(.5,0),name:"GroupName"},binding:Qn(e,t,n)}),Ye(e,t,{props:{name:"BODY",opacity:0,margin:new t.Margin(35,25,0,10)}})]})]})}(e,t,a):function(e,t,n){return ze(e,t,{type:"Vertical",props:{selectionObjectName:"PANEL",ungroupable:!0},parts:[Fe(e,t,{type:"Auto",props:{name:"PANEL"},parts:[Ye(e,t,{props:{},binding:qn(e,t,n)}),e(t.Panel,{alignment:new t.Spot(.5,0,0,5)},e("SubGraphExpanderButton",{"ButtonBorder.figure":"Rectangle"})),Ue(e,t,{props:{font:'bold 18px "Microsoft Yahei"',isMultiline:!0,editable:!0,alignment:new t.Spot(.5,0,0,15)},binding:Qn(e,t,n)}),e(t.Placeholder,{margin:new t.Margin(25,25,25,25),background:"transparent"})]})]})}(e,t,a)},ja={func:xt,tween:Nt,AnimationEvents:Dt},wa={getGroupLayout:function(e,t){var n=Object.assign({categoryName:"Group"},t);function a(){e.Layout.call(this)}return e.Diagram.inherit(a,e.Layout),a.prototype.doLayout=function(t){var a=this;t=this.collectParts(t);var i=new e.Set;t.each(function(t){t instanceof e.Node&&t.category===n.categoryName&&i.add(t)});var r={},o={};function s(e){var t=r[e.data.key],n=[];for(var a in r)t===r[a]&&n.push(a);0===n.length||o[t]||(o[t]=n)}function l(t,n){for(var a=new e.Set,i=t.data._members,r=0;r<i.length;r++){var o=i[r];a.add(n.findNodeForData(o))}return a}function c(e,t,a){var i=e.data._members;if(!i)return!0;for(var r=0;r<i.length;r++){var o=i[r];if(o.category===n.categoryName){var s=a.findNodeForData(o);if(t.has(s))return!1}}return!0}for(i.each(function(e){var t=e.data._members.map(function(e){return e.key});t.sort(function(e,t){return e<t?-1:1}),r[e.data.key]=t.join(",")}),this.diagram.startTransaction("Custom Layout");i.count>0;){for(var d=null,u=i.iterator;u.next();)if(c(u.value,i,this.diagram)){d=u.value;break}i.remove(d);var p=this.diagram.computePartsBounds(l(d,this.diagram));d.location=p.position;var f=d.findObject("BODY");f&&(f.desiredSize=p.size),s(d)}var h=function(t){var n=o[t],i=0;n.forEach(function(t,n){var r=a.diagram.model.nodeDataArray.find(function(e){return e.key.toString()===t}),o=a.diagram.findNodeForKey(r.key),s=o.findObject("GroupName"),l=o.findObject("BODY"),c=s.measuredBounds.bottom-s.measuredBounds.top;l.margin=new e.Margin(i+35,25,0,10),i+=c})};for(var g in o)h(g);this.diagram.commitTransaction("Custom Layout")},a},getGroupDragging:function(e,t){var n=Object.assign({categoryName:"Group"},t);function a(){e.DraggingTool.call(this)}return e.Diagram.inherit(a,e.DraggingTool),a.prototype.moveParts=function(t,n,a){e.DraggingTool.prototype.moveParts.call(this,t,n,a),this.diagram.layoutDiagram(!0)},a.prototype.computeEffectiveCollection=function(t){var n=(new e.Set).addAll(t),a=this;return t.each(function(e){a.walkSubTree(e,n)}),e.DraggingTool.prototype.computeEffectiveCollection.call(this,n)},a.prototype.walkSubTree=function(e,t){if(null!==e&&(t.add(e),e.category===n.categoryName)){var a=e.data._members;if(a)for(var i=0;i<a.length;i++){var r=a[i];this.walkSubTree(this.diagram.findNodeForData(r),t)}}},a},setGroupLayout:function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n.addDiagramListener("LayoutCompleted",function e(){n.removeDiagramListener("LayoutCompleted",e);for(var t=n.model.nodeDataArray,i=0;i<t.length;i++){var r=t[i],o=r.groups;if(o)for(var s=0;s<o.length;s++){var l=n.model.findNodeDataForKey(o[s]);l&&(r._supers?r._supers.push(l):r._supers=[l],l._members?l._members.push(r):l._members=[r])}}for(var c=0;c<t.length;c++)t[c].category!==a.categoryName||t[c]._members||(t[c]._members=[]);var d=new(0,a.groupLayout);d.isOngoing=!0,n.layout=d,n.layout.doLayout(n.nodes)}),function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=new t.Set,r=Object.assign({categoryName:"Group",type:"ForceDirectedLayout",layoutOptions:{}},a);if(n.nodes.each(function(e){e.data.category!==r.categoryName&&i.add(e)}),n.links.each(function(e){i.add(e)}),"GridLayout"===r.type){var o=n.model.nodeDataArray.length,s=Math.floor(Math.sqrt(o)+1);r.layoutOptions.wrappingColumn=s}var l=pe[r.type](e,t,r.layoutOptions);l.isOngoing=!0,n.layout=l,n.layoutDiagram()}(e,t,n,a)}},Na={DataManager:aa,diagramManager:l},_a=pe;r.a},218:function(e,t,n){},219:function(e,t,n){},320:function(e,t,n){},336:function(e,t,n){"use strict";var a=n(218);n.n(a).a},359:function(e,t,n){"use strict";var a=n(219);n.n(a).a}}]);